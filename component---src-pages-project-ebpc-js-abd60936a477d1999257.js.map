{"version":3,"file":"component---src-pages-project-ebpc-js-abd60936a477d1999257.js","mappings":"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","sources":["webpack://gatsby-starter-default/./node_modules/gatsby-plugin-react-i18next/dist/useI18next.js","webpack://gatsby-starter-default/./node_modules/gatsby-plugin-react-i18next/dist/Link.js","webpack://gatsby-starter-default/./src/components/lang-switch.js","webpack://gatsby-starter-default/./src/components/header.js","webpack://gatsby-starter-default/./src/components/footer.js","webpack://gatsby-starter-default/./src/components/layout.js","webpack://gatsby-starter-default/./node_modules/gatsby-plugin-react-i18next/index.js","webpack://gatsby-starter-default/./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack://gatsby-starter-default/./src/components/ExponentialBackoffDemo.js","webpack://gatsby-starter-default/./src/components/BitDepthDemo.js","webpack://gatsby-starter-default/./src/components/ProducerConsumerDemo.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/math.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/compose.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/rotation.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/noop.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/clip/buffer.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/pointEqual.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/clip/rejoin.js","webpack://gatsby-starter-default/./node_modules/d3-array/src/fsum.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/cartesian.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/polygonContains.js","webpack://gatsby-starter-default/./node_modules/d3-array/src/merge.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/clip/index.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/clip/antimeridian.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/circle.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/clip/rectangle.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/clip/line.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/identity.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/transform.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/stream.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/path/bounds.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/projection/fit.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/projection/resample.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/projection/index.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/clip/circle.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/projection/mercator.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/path/area.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/path/centroid.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/path/context.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/path/measure.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/path/string.js","webpack://gatsby-starter-default/./node_modules/topojson-client/src/identity.js","webpack://gatsby-starter-default/./node_modules/topojson-client/src/feature.js","webpack://gatsby-starter-default/./node_modules/topojson-client/src/transform.js","webpack://gatsby-starter-default/./node_modules/topojson-client/src/reverse.js","webpack://gatsby-starter-default/./src/components/ConnectivityMap.js","webpack://gatsby-starter-default/./node_modules/d3-geo/src/path/index.js","webpack://gatsby-starter-default/./src/pages/project/ebpc.js","webpack://gatsby-starter-default/./src/components/seo.js","webpack://gatsby-starter-default/./src/images/project/china-scholarship-logo.jpg","webpack://gatsby-starter-default/./node_modules/gatsby-plugin-react-i18next/dist/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nexports.__esModule = true;\nexports.useI18next = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _reactI18next = require(\"react-i18next\");\nvar _react = require(\"react\");\nvar _gatsby = require(\"gatsby\");\nvar _i18nextContext = require(\"./i18nextContext\");\nvar _types = require(\"./types\");\nvar useI18next = function useI18next(ns, options) {\n  var _useTranslation = (0, _reactI18next.useTranslation)(ns, options),\n    i18n = _useTranslation.i18n,\n    t = _useTranslation.t,\n    ready = _useTranslation.ready;\n  var context = (0, _react.useContext)(_i18nextContext.I18nextContext);\n  var routed = context.routed,\n    defaultLanguage = context.defaultLanguage,\n    generateDefaultLanguagePage = context.generateDefaultLanguagePage;\n  var getLanguagePath = function getLanguagePath(language) {\n    return generateDefaultLanguagePage || language !== defaultLanguage ? \"/\" + language : '';\n  };\n  var removePrefix = function removePrefix(pathname) {\n    var base = typeof __BASE_PATH__ !== \"undefined\" ? __BASE_PATH__ : __PATH_PREFIX__;\n    if (base && pathname.indexOf(base) === 0) {\n      pathname = pathname.slice(base.length);\n    }\n    return pathname;\n  };\n  var removeLocalePart = function removeLocalePart(pathname) {\n    if (!routed) return pathname;\n    var i = pathname.indexOf(\"/\", 1);\n    return pathname.substring(i);\n  };\n  var navigate = function navigate(to, options) {\n    var languagePath = getLanguagePath(context.language);\n    var link = routed ? \"\" + languagePath + to : \"\" + to;\n    return (0, _gatsby.navigate)(link, options);\n  };\n  var changeLanguage = function changeLanguage(language, to, options) {\n    var languagePath = getLanguagePath(language);\n    var pathname = to || removeLocalePart(removePrefix(window.location.pathname));\n    var link = \"\" + languagePath + pathname + window.location.search;\n    localStorage.setItem(_types.LANGUAGE_KEY, language);\n    return (0, _gatsby.navigate)(link, options);\n  };\n  return (0, _extends2.default)({}, context, {\n    i18n: i18n,\n    t: t,\n    ready: ready,\n    navigate: navigate,\n    changeLanguage: changeLanguage\n  });\n};\nexports.useI18next = useI18next;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nexports.__esModule = true;\nexports.Link = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _i18nextContext = require(\"./i18nextContext\");\nvar _gatsby = require(\"gatsby\");\nvar _types = require(\"./types\");\nvar _excluded = [\"language\", \"to\", \"onClick\"];\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar Link = /*#__PURE__*/_react.default.forwardRef(function (_ref, ref) {\n  var language = _ref.language,\n    to = _ref.to,\n    _onClick = _ref.onClick,\n    rest = (0, _objectWithoutPropertiesLoose2.default)(_ref, _excluded);\n  var context = (0, _react.useContext)(_i18nextContext.I18nextContext);\n  var urlLanguage = language || context.language;\n  var getLanguagePath = function getLanguagePath(language) {\n    return context.generateDefaultLanguagePage || language !== context.defaultLanguage ? \"/\" + language : '';\n  };\n  var link = \"\" + getLanguagePath(urlLanguage) + to;\n  return (\n    /*#__PURE__*/\n    // @ts-ignore\n    _react.default.createElement(_gatsby.Link, (0, _extends2.default)({}, rest, {\n      to: link,\n      innerRef: ref,\n      hrefLang: urlLanguage,\n      onClick: function onClick(e) {\n        if (language) {\n          localStorage.setItem(_types.LANGUAGE_KEY, language);\n        }\n        if (_onClick) {\n          _onClick(e);\n        }\n      }\n    }))\n  );\n});\nexports.Link = Link;","import React from 'react'\nimport { useTranslation, useI18next } from 'gatsby-plugin-react-i18next'\n\nconst LangSwitch = () => {\n  const { i18n } = useTranslation()\n  const { languages, originalPath, language: currentLanguage, changeLanguage, navigate } = useI18next()\n  const current = currentLanguage || (i18n && i18n.language) || 'en'\n\n  // Enable inline client-side language switch (no navigation, URL unchanged).\n  // Pros: instant UI update for strings managed by react-i18next.\n  // Cons: page-level GraphQL data that depends on language won't be re-fetched,\n  // and SEO/URL will not reflect language change. Set to false to retain navigation behavior.\n  const INLINE_SWITCH = true\n\n  return (\n    <div className=\"ml-4 inline-flex items-center\">\n      {languages.map((lng) => {\n        const label = lng === 'zh' ? '' : lng.toUpperCase()\n        return (\n        <button\n          key={lng}\n          onClick={async () => {\n            if (INLINE_SWITCH) {\n              // Only change translations in-place; do not navigate. Update URL using history.pushState\n              if (changeLanguage) await changeLanguage(lng)\n              try {\n                if (i18n && i18n.changeLanguage) i18n.changeLanguage(lng)\n              } catch (e) {\n                // ignore\n              }\n\n              // Update the URL to reflect language without triggering navigation\n              if (typeof window !== 'undefined') {\n                try {\n                  const url = new URL(window.location.href)\n                  const p = url.pathname\n                  // remove existing language prefix if present\n                  const parts = p.split('/').filter(Boolean)\n                  if (parts.length > 0 && languages.includes(parts[0])) parts.shift()\n                  // add selected language as prefix unless it's default 'en'\n                  const newParts = (lng === 'en') ? parts : [lng, ...parts]\n                  const newPath = '/' + newParts.join('/') + (url.search || '') + (url.hash || '')\n                  window.history.pushState({}, '', newPath)\n                } catch (e) {\n                  // ignore pushState errors\n                }\n              }\n\n              return\n            }\n\n            // Default: navigation-based change with prefetch\n            try {\n              if (changeLanguage) await changeLanguage(lng)\n\n              if (navigate && originalPath) {\n                let localizedPath = originalPath\n                if (!originalPath.startsWith(`/${lng}`)) {\n                  localizedPath = `/${lng}${originalPath}`\n                }\n\n                try {\n                  if (typeof window !== 'undefined' && window.___loader && window.___loader.enqueue) {\n                    window.___loader.enqueue([localizedPath])\n                  }\n                } catch (e) {\n                  /* ignore prefetch errors */\n                }\n\n                navigate(localizedPath)\n              }\n            } catch (e) {\n              if (changeLanguage) changeLanguage(lng)\n              if (navigate && originalPath) navigate(originalPath, { language: lng })\n            }\n          }}\n          aria-current={lng === current ? 'true' : 'false'}\n          data-lang={lng}\n          className={`px-2 py-1 rounded text-sm focus:outline-none focus:ring-2 focus:ring-offset-2\n            ${lng === current ? 'font-semibold bg-gray-200 text-gray-900 dark:bg-gray-700 dark:text-white' : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800'}\n            transition-colors duration-150 mx-1`}\n          title={label}\n        >\n          {label}\n        </button>\n      )})}\n    </div>\n  )\n}\n\nexport default LangSwitch\n","import * as React from \"react\"\nimport { Link } from \"gatsby\"\nimport { useTranslation, useI18next } from 'gatsby-plugin-react-i18next'\nimport LangSwitch from './lang-switch'\nimport { useLocation } from '@reach/router'\nimport { useEffect, useState } from 'react'\n\nconst Header = ({ siteTitle }) => {\n  const { t } = useTranslation()\n  const { language } = useI18next()\n  const loc = useLocation()\n  const pathname = (typeof window !== 'undefined' && loc && loc.pathname) ? loc.pathname : '/'\n\n  const isActive = (to) => {\n    // Normalize with language prefix (ensure leading slash, no trailing slash)\n    const raw = to.startsWith('/') ? to : `/${to}`\n    const normalized = raw.replace(/\\/+$|\\/$/, '') || '/'\n\n    // Special-case root: don't use startsWith('/') because every path starts with '/'\n    if (normalized === '/') {\n      if (language && language !== 'en') {\n        const prefRoot = `/${language}`\n        return pathname === '/' || pathname === prefRoot || pathname === `${prefRoot}/`\n      }\n      return pathname === '/'\n    }\n\n    // For non-root paths, consider exact match or sub-paths\n    if (language && language !== 'en') {\n      const prefixed = `/${language}${normalized}`\n      if (pathname === prefixed || pathname === `${prefixed}/` || pathname.startsWith(`${prefixed}/`)) return true\n    }\n    if (pathname === normalized || pathname === `${normalized}/` || pathname.startsWith(`${normalized}/`)) return true\n    return false\n  }\n\n  const [theme, setTheme] = useState(() => {\n    if (typeof window === 'undefined') return 'light'\n    try {\n      const stored = localStorage.getItem('color-theme')\n      if (stored) return stored\n      return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'\n    } catch (e) {\n      return 'light'\n    }\n  })\n\n  useEffect(() => {\n    try {\n      if (theme === 'dark') {\n        document.documentElement.classList.add('dark')\n        localStorage.setItem('color-theme', 'dark')\n      } else {\n        document.documentElement.classList.remove('dark')\n        localStorage.setItem('color-theme', 'light')\n      }\n    } catch (e) {}\n  }, [theme])\n\n  const toggleTheme = () => setTheme(t => (t === 'dark' ? 'light' : 'dark'))\n\n  return (\n  <header>\n\n    <nav className=\"bg-white border-gray-200 dark:bg-gray-900\">\n      <div className=\"max-w-(--breakpoint-xl) flex flex-wrap items-center justify-between mx-auto p-4\">\n        <Link to=\"/\" className=\"flex items-center\">\n          <span className=\"self-center text-2xl font-semibold whitespace-nowrap dark:text-white\">{siteTitle}</span>\n        </Link>\n\n        <div className=\"flex items-center md:order-2\">\n          <button type=\"button\" id=\"theme-toggle\" onClick={toggleTheme}\n          className=\"inline-flex items-center\n           font-medium justify-center px-4 py-2 \n           text-sm text-gray-900 dark:text-white \n           rounded-lg cursor-pointer hover:bg-gray-100\n            dark:hover:bg-gray-700 dark:hover:text-white\" aria-label=\"Toggle theme\">\n            {/* light icon visible in light mode, dark icon in dark mode; controlled by React state for immediate response */}\n            <svg className={`${theme === 'dark' ? 'hidden' : 'inline'} w-5 h-5`} fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z\" fillRule=\"evenodd\" clipRule=\"evenodd\"></path></svg>\n            <svg className={`${theme === 'dark' ? 'inline' : 'hidden'} w-5 h-5`} fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z\"></path></svg>\n          </button>\n          <LangSwitch />\n            <button data-collapse-toggle=\"navbar-default\" type=\"button\"\n           className=\"inline-flex items-center p-2 ml-3 text-sm text-gray-500\n            rounded-lg md:hidden hover:bg-gray-100 focus:outline-hidden focus:ring-2\n             focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700\n              dark:focus:ring-gray-600\" aria-controls=\"navbar-default\" aria-expanded=\"false\">\n            <span className=\"sr-only\">{t('nav.openMenu')}</span>\n            <svg className=\"w-6 h-6\" aria-hidden=\"true\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fillRule=\"evenodd\" d=\"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z\" clipRule=\"evenodd\"></path></svg>\n          </button>\n        </div>\n        <div className=\"items-center justify-between hidden w-full md:flex md:w-auto md:order-1\" id=\"navbar-default\">\n          <ul className=\"flex flex-col font-medium p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700\">\n            <li>\n              {/* <Link href=\"/\" className=\"block py-2 pl-3 pr-4 text-white bg-blue-700 rounded-sm md:bg-transparent md:text-blue-700 md:p-0 dark:text-white md:dark:text-blue-500\" aria-current=\"page\">Home</Link> */}\n              <Link to=\"/\" className={`block py-2 pl-3 pr-4 rounded-sm md:p-0 ${isActive('/') ? 'text-white bg-blue-600 md:bg-transparent md:text-blue-700 dark:text-white' : 'text-gray-900 hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent'}`}>{t('nav.home')}</Link>\n            </li>\n            <li>\n              <Link to=\"/resume/\" className={`block py-2 pl-3 pr-4 rounded-sm md:p-0 ${isActive('/resume') ? 'text-white bg-blue-600 md:bg-transparent md:text-blue-700 dark:text-white' : 'text-gray-900 hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent'}`}>{t('nav.cv')}</Link>\n            </li>\n            <li>\n              <Link to=\"/project/\" className={`block py-2 pl-3 pr-4 rounded-sm md:p-0 ${isActive('/project') ? 'text-white bg-blue-600 md:bg-transparent md:text-blue-700 dark:text-white' : 'text-gray-900 hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent'}`}>{t('nav.projects')}</Link>\n            </li>\n            <li>\n              <Link to=\"/update/\" className={`block py-2 pl-3 pr-4 rounded-sm md:p-0 ${isActive('/update') ? 'text-white bg-blue-600 md:bg-transparent md:text-blue-700 dark:text-white' : 'text-gray-900 hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent'}`}>{t('nav.updates')}</Link>\n            </li>\n            <li>\n              <Link to=\"/contact/\" className={`block py-2 pl-3 pr-4 rounded-sm md:p-0 ${isActive('/contact') ? 'text-white bg-blue-600 md:bg-transparent md:text-blue-700 dark:text-white' : 'text-gray-900 hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent'}`}>{t('nav.contact')}</Link>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </nav>\n\n    {/* Theme switcher is loaded and invoked from Layout via Script tags */}\n\n\n  </header>\n  )\n}\n\nexport default Header\n","import { Link } from \"gatsby\";\nimport * as React from \"react\"\nimport { useTranslation } from 'gatsby-plugin-react-i18next'\n\nconst Footer = () => {\n    const { t } = useTranslation()\n    return (\n    <footer className=\"bg-white p-4 dark:bg-gray-800\">\n        <div className=\"w-full mx-auto max-w-(--breakpoint-xl) p-4 md:flex md:items-center md:justify-between\">\n            <span className=\"text-sm text-gray-500 sm:text-center dark:text-gray-400\">\n                 2014 - {new Date().getFullYear()} <Link to=\"https://kidozh.com/\" class=\"hover:underline\">kidozh</Link>. {t('footer.allRightsReserved')}\n            </span>\n        </div>\n    </footer>\n    )\n}\n\nexport default Footer;","/**\n * Layout component that queries for data\n * with Gatsby's useStaticQuery component\n *\n * See: https://www.gatsbyjs.com/docs/how-to/querying-data/use-static-query/\n */\n\nimport * as React from \"react\"\nimport { useStaticQuery, graphql } from \"gatsby\"\n\nimport Header from \"./header\"\nimport \"./layout.css\"\nimport Footer from \"./footer\"\n// Script import removed; theme toggle is React driven in Header\n\nconst Layout = ({ children }) => {\n  const data = useStaticQuery(graphql`\n    query SiteTitleQuery {\n      site {\n        siteMetadata {\n          title\n        }\n      }\n    }\n  `)\n\n  return (\n    <>\n      {/* Inline critical theme-snippet: run synchronously before render to avoid flash/jank */}\n      <script\n        dangerouslySetInnerHTML={{\n          __html: `(function() {\n  try {\n    var stored = localStorage.getItem('color-theme');\n    var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n    if (stored === 'dark' || (stored === null && prefersDark)) {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  } catch (e) {\n    /* ignore */\n  }\n})();`\n        }}\n      />\n  <Header siteTitle={data.site.siteMetadata?.title || `Title`} />\n      \n        <main>{children}</main>\n        \n        \n      \n      <Footer />\n      \n    </>\n  )\n}\n\nexport default Layout\n","module.exports = require('./dist');\n","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nmodule.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import * as React from \"react\"\n\nexport default function ExponentialBackoffDemo() {\n  const [attempts, setAttempts] = React.useState([])\n  const [running, setRunning] = React.useState(false)\n  const [currentDelay, setCurrentDelay] = React.useState(null)\n    const [successPct, setSuccessPct] = React.useState(90) // percent\n  const [networkRTT, setNetworkRTT] = React.useState(200) // ms - simulated network round-trip time\n  const timerRef = React.useRef(null)\n  const baseDelay = 100 // ms\n  const maxAttempts = 8\n\n  React.useEffect(() => {\n    return () => {\n      if (timerRef.current) clearTimeout(timerRef.current)\n    }\n  }, [])\n\n  // ensure indicator timer cleared on unmount\n  React.useEffect(() => {\n    return () => {\n      if (indicatorTimerRef.current) clearTimeout(indicatorTimerRef.current)\n    }\n  }, [])\n\n  const jitterFor = (raw) => Math.floor(Math.random() * Math.floor(raw * 0.1))\n  // Continuous sending model\n  const senderTimerRef = React.useRef(null)\n  const seqRef = React.useRef(0)\n  const responseTimersRef = React.useRef(new Map())\n  const [nextSendRemaining, setNextSendRemaining] = React.useState(null)\n  const countdownRef = React.useRef(null)\n  const [changeIndicator, setChangeIndicator] = React.useState(null)\n  const indicatorTimerRef = React.useRef(null)\n  const [logs, setLogs] = React.useState([])\n  const runningRef = React.useRef(false)\n\n  const currentDelayRef = React.useRef(null)\n  const [isDark, setIsDark] = React.useState(false)\n\n  React.useEffect(() => {\n    // keep ref in sync with state\n    currentDelayRef.current = currentDelay\n  }, [currentDelay])\n\n  React.useEffect(() => {\n    if (typeof window === 'undefined' || !window.matchMedia) return\n    const m = window.matchMedia('(prefers-color-scheme: dark)')\n    const set = (v) => setIsDark(v.matches)\n    set(m)\n    if (m.addEventListener) m.addEventListener('change', set)\n    else if (m.addListener) m.addListener(set)\n    return () => {\n      if (m.removeEventListener) m.removeEventListener('change', set)\n      else if (m.removeListener) m.removeListener(set)\n    }\n  }, [])\n\n  const pushLog = (msg) => {\n    const time = new Date().toLocaleTimeString()\n    setLogs((prev) => {\n      const next = [{ time, msg }, ...prev]\n      return next.slice(0, 20)\n    })\n  }\n\n  const sendOne = () => {\n    const id = ++seqRef.current\n    const sendTime = new Date().toLocaleTimeString()\n    const delayAtSend = currentDelay === null ? baseDelay : currentDelay\n\n    // mark as sent (cap history at 200 entries)\n    setAttempts((prev) => {\n      const next = [...prev, { id, attempt: id, delayAtSend, status: 'sent', time: sendTime }]\n      return next.length > 200 ? next.slice(-200) : next\n    })\n\n    // simulate network RTT and response\n    const observedRTT = Math.max(1, networkRTT + jitterFor(networkRTT))\n    const timer = setTimeout(() => {\n      const success = Math.random() < successPct / 100\n\n      setAttempts((prev) =>\n        prev.map((it) => (it.id === id ? { ...it, observedRTT, status: success ? 'succeeded' : 'failed' } : it))\n      )\n\n      // On failure: increase interval (double)\n      if (!success) {\n        setCurrentDelay((prevDelay) => {\n          const prev = prevDelay == null ? baseDelay : prevDelay\n          let next = Math.min(prev * 2, 20000)\n          next = Math.min(next + jitterFor(next), 20000)\n          if (next !== prev) {\n            if (senderTimerRef.current) {\n              clearTimeout(senderTimerRef.current)\n              senderTimerRef.current = null\n            }\n            if (countdownRef.current) {\n              clearInterval(countdownRef.current)\n              countdownRef.current = null\n            }\n            scheduleNextSend(next)\n            // show transient indicator\n            const kind = 'increase'\n            setChangeIndicator(kind)\n            if (indicatorTimerRef.current) clearTimeout(indicatorTimerRef.current)\n            indicatorTimerRef.current = setTimeout(() => setChangeIndicator(null), 1200)\n            // log the decision\n            try { pushLog(`failure  doubled ${prev}ms  ${next}ms`) } catch (e) {}\n          }\n          return next\n        })\n      } else {\n        // On success: adapt based on observedRTT vs current delay\n        setCurrentDelay((prevDelay) => {\n          const prev = prevDelay == null ? baseDelay : prevDelay\n          let next = prev\n          if (observedRTT > prev * 2) {\n            // RTT is more than twice the current interval -> double\n            next = Math.min(prev * 2, 20000)\n          } else if (observedRTT < prev / 2) {\n            next = Math.max(baseDelay, Math.floor(prev / 2))\n          } else {\n            next = prev\n          }\n          next = Math.min(next + jitterFor(next), 20000)\n          if (next !== prev) {\n            if (senderTimerRef.current) {\n              clearTimeout(senderTimerRef.current)\n              senderTimerRef.current = null\n            }\n            if (countdownRef.current) {\n              clearInterval(countdownRef.current)\n              countdownRef.current = null\n            }\n            scheduleNextSend(next)\n            const kind = next > prev ? 'increase' : 'decrease'\n            setChangeIndicator(kind)\n            if (indicatorTimerRef.current) clearTimeout(indicatorTimerRef.current)\n            indicatorTimerRef.current = setTimeout(() => setChangeIndicator(null), 1200)\n            // log the decision with reason\n            try {\n              const reason = observedRTT > prev * 2 ? `RTT ${observedRTT}ms > 2${prev}ms` : `RTT ${observedRTT}ms < 1/2${prev}ms`\n              pushLog(`${reason}  ${next}ms`)\n            } catch (e) {}\n          }\n          return next\n        })\n      }\n\n      responseTimersRef.current.delete(id)\n    }, observedRTT)\n\n    responseTimersRef.current.set(id, timer)\n  }\n\n  const scheduleNextSend = (interval) => {\n    // schedule next send after interval ms\n    const start = Date.now()\n    setNextSendRemaining(interval)\n    senderTimerRef.current = setTimeout(() => {\n      if (!runningRef.current) return\n      sendOne()\n      // schedule using the latest currentDelayRef value (fix stale closure)\n      const nextInterval = currentDelayRef.current == null ? baseDelay : currentDelayRef.current\n      scheduleNextSend(nextInterval)\n    }, interval)\n\n    // countdown updater\n    if (countdownRef.current) clearInterval(countdownRef.current)\n    countdownRef.current = setInterval(() => {\n      const elapsed = Date.now() - start\n      const remaining = Math.max(0, interval - elapsed)\n      setNextSendRemaining(remaining)\n      if (remaining === 0 && countdownRef.current) {\n        clearInterval(countdownRef.current)\n        countdownRef.current = null\n      }\n    }, 100)\n  }\n\n  // Immediate adaptation when networkRTT changes while running:\n  React.useEffect(() => {\n    if (!running) return\n    const cap = 20000\n    const observed = Math.ceil(networkRTT)\n    setCurrentDelay((prevDelay) => {\n      const prev = prevDelay == null ? baseDelay : prevDelay\n      let next = prev\n      // apply single-step adaptation using the new thresholds:\n      // if observed RTT is more than twice the current interval -> double\n      if (observed > prev * 2) {\n        next = Math.min(prev * 2, cap)\n      } else if (observed < prev / 2) {\n        // if observed RTT is less than half the current interval -> halve\n        next = Math.max(baseDelay, Math.floor(prev / 2))\n      }\n      if (next !== prev) {\n        // reschedule sender loop with next\n        if (senderTimerRef.current) {\n          clearTimeout(senderTimerRef.current)\n          senderTimerRef.current = null\n        }\n        if (countdownRef.current) {\n          clearInterval(countdownRef.current)\n          countdownRef.current = null\n        }\n        scheduleNextSend(next)\n      }\n      return next\n    })\n  }, [networkRTT])\n\n  const start = () => {\n    if (running) return\n    setAttempts([])\n    setRunning(true)\n    runningRef.current = true\n    // start from a delay that is at least slightly larger than current RTT\n    const initialDelay = Math.max(baseDelay, Math.ceil(networkRTT * 1.1))\n    setCurrentDelay(initialDelay)\n    currentDelayRef.current = initialDelay\n    // send first immediately, then schedule loop\n    sendOne()\n    scheduleNextSend(initialDelay)\n  }\n\n  const cancel = () => {\n    // stop sender timer\n    if (senderTimerRef.current) {\n      clearTimeout(senderTimerRef.current)\n      senderTimerRef.current = null\n    }\n    if (countdownRef.current) {\n      clearInterval(countdownRef.current)\n      countdownRef.current = null\n    }\n    // clear pending response timers\n    for (const t of responseTimersRef.current.values()) clearTimeout(t)\n    responseTimersRef.current.clear()\n    setRunning(false)\n    runningRef.current = false\n    setAttempts((prev) => [...prev, { attempt: 'cancelled', delay: 0, status: 'cancelled', time: new Date().toLocaleTimeString() }])\n    setCurrentDelay(null)\n    currentDelayRef.current = null\n  }\n\n  const reset = () => {\n    cancel()\n    setAttempts([])\n    setCurrentDelay(null)\n    runningRef.current = false\n  }\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-2xl p-6\">\n      <h2 className=\"text-2xl font-montserrat font-bold text-gray-800 dark:text-white\">Exponential Backoff Demo</h2>\n      <hr className=\"h-1 my-6 w-24 bg-orange-500 border-orange-500\" />\n\n      <p className=\"text-gray-700 dark:text-gray-200 font-light mb-4\">\n        The demo shows how the retry interval dynamically adapts: each failure doubles the delay (capped) and adds a small jitter.\n        Use the <strong>network success</strong> slider to change the simulated probability of success per attempt.\n      </p>\n\n      <div className=\"flex gap-3 mb-4 items-center\">\n        <button\n          onClick={start}\n          disabled={running}\n          className=\"text-white bg-orange-600 hover:bg-orange-700 disabled:opacity-50 font-medium rounded-full px-4 py-2\"\n        >\n          Start\n        </button>\n        <button\n          onClick={cancel}\n          disabled={!running}\n          className=\"text-orange-700 bg-orange-100 hover:bg-orange-200 disabled:opacity-50 font-medium rounded-full px-4 py-2\"\n        >\n          Cancel\n        </button>\n        <button\n          onClick={reset}\n          className=\"text-gray-700 bg-gray-100 hover:bg-gray-200 font-medium rounded-full px-3 py-2\"\n        >\n          Reset\n        </button>\n      </div>\n\n      {/* Prominent current delay display */}\n      <div className=\"mb-4\">\n        <div aria-live=\"polite\" className=\"inline-flex items-baseline gap-3\">\n          <span className=\"text-sm text-gray-500 dark:text-gray-300\">Current send interval:</span>\n          <span className=\"text-xl font-mono font-semibold text-orange-600 dark:text-orange-400\">{currentDelay === null ? '-' : `${currentDelay} ms`}</span>\n          {changeIndicator === 'increase' && <span className=\"ml-2 px-2 py-0.5 text-xs bg-red-100 text-red-700 rounded\"></span>}\n          {changeIndicator === 'decrease' && <span className=\"ml-2 px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded\"></span>}\n        </div>\n      </div>\n\n      <div className=\"mb-4 space-y-3\">\n        <div>\n          <label className=\"text-sm text-gray-600 dark:text-gray-300\">Network success: {successPct}%</label>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"100\"\n            value={successPct}\n            onChange={(e) => setSuccessPct(Number(e.target.value))}\n            className=\"w-full mt-2\"\n            style={{ accentColor: isDark ? '#60a5fa' : '#fb923c' }}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm text-gray-600 dark:text-gray-300\">Simulated network RTT (ms): {networkRTT} ms</label>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"2000\"\n            value={networkRTT}\n            onChange={(e) => setNetworkRTT(Number(e.target.value))}\n            className=\"w-full mt-2\"\n            style={{ accentColor: isDark ? '#60a5fa' : '#fb923c' }}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm text-gray-600 dark:text-gray-300\">Current scheduled delay (ms)</label>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"20000\"\n            value={currentDelay === null ? 0 : currentDelay}\n            readOnly\n            disabled\n            className=\"w-full mt-2 opacity-90\"\n            style={{ accentColor: isDark ? '#60a5fa' : '#fb923c' }}\n          />\n        </div>\n      </div>\n\n      <div className=\"text-sm text-gray-600 dark:text-gray-300 mb-4\">\n        <div className=\"mb-1\">Running: <strong>{running ? 'yes' : 'no'}</strong></div>\n        <div className=\"mb-1\">Attempts: <strong>{attempts.length}</strong></div>\n        <div className=\"mb-1\">Current delay: <strong>{currentDelay === null ? '-' : `${currentDelay} ms`}</strong>\n          {changeIndicator === 'increase' && <span className=\"ml-2 px-2 py-0.5 text-xs bg-red-100 text-red-700 rounded\"></span>}\n          {changeIndicator === 'decrease' && <span className=\"ml-2 px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded\"></span>}\n        </div>\n        <div className=\"mb-1\">Next send in: <strong>{nextSendRemaining == null ? '-' : `${Math.ceil(nextSendRemaining)} ms`}</strong></div>\n      </div>\n      <div className=\"mb-4\">\n        {/* Sparkline */}\n        {attempts.length > 0 && (\n          <div className=\"w-full h-24 bg-white dark:bg-slate-800 p-2 rounded\">\n            <Sparkline attempts={attempts.slice(-60)} width={600} height={48} />\n          </div>\n        )}\n      </div>\n\n      {/* Decision log */}\n      <div className=\"mb-4\">\n        <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-200 mb-2\">Decision log (latest)</h4>\n        <div className=\"overflow-auto max-h-40 border rounded p-2 bg-white dark:bg-slate-800 text-sm\">\n          {logs.length === 0 ? (\n            <div className=\"text-gray-500\">No decisions yet.</div>\n          ) : (\n            <ul className=\"list-none space-y-1\">\n              {logs.map((l, i) => (\n                <li key={i} className=\"flex justify-between\">\n                  <span className=\"text-gray-600 dark:text-gray-300\">{l.msg}</span>\n                  <span className=\"text-xs text-gray-400 ml-2\">{l.time}</span>\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n      </div>\n\n      <div className=\"overflow-auto max-h-60 border rounded p-2 bg-gray-50 dark:bg-slate-700\">\n        {attempts.length === 0 ? (\n          <div className=\"text-gray-500\">No attempts yet.</div>\n        ) : (\n          <table className=\"min-w-full text-sm\">\n            <thead>\n              <tr className=\"text-left\">\n                <th className=\"px-2 py-1\">#</th>\n                <th className=\"px-2 py-1\">Status</th>\n                <th className=\"px-2 py-1\">Delay at send (ms)</th>\n                <th className=\"px-2 py-1\">Observed RTT (ms)</th>\n                <th className=\"px-2 py-1\">Time</th>\n              </tr>\n            </thead>\n            <tbody>\n              {attempts.map((a) => {\n                const bad = typeof a.observedRTT === 'number' && a.observedRTT > (a.delayAtSend || 0)\n                return (\n                  <tr key={a.id} className={bad ? 'bg-red-50 dark:bg-red-900/30' : ''}>\n                    <td className=\"px-2 py-1 align-top\">{a.attempt}</td>\n                    <td className=\"px-2 py-1 align-top\">{a.status}</td>\n                    <td className=\"px-2 py-1 align-top\">{a.delayAtSend ?? '-'}</td>\n                    <td className=\"px-2 py-1 align-top\">{typeof a.observedRTT === 'number' ? a.observedRTT : '-'}</td>\n                    <td className=\"px-2 py-1 align-top\">{a.time}</td>\n                  </tr>\n                )\n              })}\n            </tbody>\n          </table>\n        )}\n      </div>\n    </div>\n  )\n}\n\nfunction Sparkline({ attempts, width = 600, height = 48 }) {\n  // build two series: delayAtSend and observedRTT\n  const delays = attempts.map((a) => (typeof a.delayAtSend === 'number' ? a.delayAtSend : 0))\n  const rtts = attempts.map((a) => (typeof a.observedRTT === 'number' ? a.observedRTT : 0))\n  const maxVal = Math.max(...delays, ...rtts, 1)\n  const w = Math.max(100, width)\n  const h = Math.max(24, height)\n  const step = w / Math.max(1, attempts.length - 1)\n\n  const pointsFor = (arr) =>\n    arr\n      .map((v, i) => {\n        const x = Math.round(i * step)\n        const y = Math.round(h - (v / maxVal) * h)\n        return `${x},${y}`\n      })\n      .join(' ')\n\n  const delayPoints = pointsFor(delays)\n  const rttPoints = pointsFor(rtts)\n\n  return (\n    <svg width=\"100%\" viewBox={`0 0 ${w} ${h}`} preserveAspectRatio=\"none\" className=\"block\">\n      <polyline fill=\"none\" stroke=\"#93c5fd\" strokeWidth=\"2\" points={rttPoints} />\n      <polyline fill=\"none\" stroke=\"#fb923c\" strokeWidth=\"2\" points={delayPoints} />\n    </svg>\n  )\n}\n","import * as React from 'react'\n\nexport default function BitDepthDemo() {\n  const [bitDepth, setBitDepth] = React.useState(8)\n  const [noiseLevel, setNoiseLevel] = React.useState(0.05)\n  const [isDark, setIsDark] = React.useState(false)\n  const width = 600\n  const height = 80\n\n  const phaseRef = React.useRef(0)\n  const rafRef = React.useRef(null)\n  const N = 256\n  const baseFreq = 4 // cycles over buffer\n\n  React.useEffect(() => {\n    if (typeof window === 'undefined' || !window.matchMedia) return\n    const m = window.matchMedia('(prefers-color-scheme: dark)')\n    const set = (v) => setIsDark(v.matches)\n    set(m)\n    if (m.addEventListener) m.addEventListener('change', set)\n    else if (m.addListener) m.addListener(set)\n    return () => {\n      if (m.removeEventListener) m.removeEventListener('change', set)\n      else if (m.removeListener) m.removeListener(set)\n    }\n  }, [])\n\n  const makeSignals = (phase, noise) => {\n    const clean = new Array(N)\n    const observed = new Array(N)\n    for (let i = 0; i < N; i++) {\n      const t = ((i / N) * Math.PI * 2 * baseFreq) + phase\n      const s = Math.sin(t) * 0.9\n      const n = (Math.random() - 0.5) * noise\n      clean[i] = Math.max(-1, Math.min(1, s))\n      observed[i] = Math.max(-1, Math.min(1, s + n))\n    }\n    return { clean, observed }\n  }\n\n  const quantize = (arr, bits) => {\n    if (!arr || arr.length === 0) return []\n    const levels = Math.max(2, Math.pow(2, bits))\n    return arr.map((v) => {\n      const scaled = (v + 1) / 2 // 0..1\n      const q = Math.round(scaled * (levels - 1))\n      const deq = (q / (levels - 1)) * 2 - 1\n      return deq\n    })\n  }\n\n  const toPoints = (arr) => {\n    if (!arr || arr.length === 0) return ''\n    const step = width / (arr.length - 1)\n    return arr\n      .map((v, i) => {\n        const x = Math.round(i * step)\n        const y = Math.round((1 - (v + 1) / 2) * height)\n        return `${x},${y}`\n      })\n      .join(' ')\n  }\n\n  const [clean, setClean] = React.useState(new Array(N).fill(0))\n  const [observed, setObserved] = React.useState(new Array(N).fill(0))\n  const [quantized, setQuantized] = React.useState(new Array(N).fill(0))\n  const [snr, setSnr] = React.useState(null)\n  const [sqnr, setSqnr] = React.useState(null)\n  const [snrHistory, setSnrHistory] = React.useState([])\n  const [sqnrHistory, setSqnrHistory] = React.useState([])\n\n  // animation loop\n  React.useEffect(() => {\n    let last = performance.now()\n    const loop = (now) => {\n      const dt = now - last\n      last = now\n      phaseRef.current += dt * 0.002 // phase speed\n      const { clean: c, observed: o } = makeSignals(phaseRef.current, noiseLevel)\n  const q = quantize(o, bitDepth)\n  const qClean = quantize(c, bitDepth)\n      setClean(c)\n      setObserved(o)\n      setQuantized(q)\n\n      // compute SNR: signal = clean, noise = clean - quantized\n      let sp = 0\n      let np = 0\n      let qnp = 0\n      for (let i = 0; i < N; i++) {\n        sp += c[i] * c[i]\n        const e = c[i] - q[i]\n        np += e * e\n        const qe = c[i] - qClean[i]\n        qnp += qe * qe\n      }\n      sp = sp / N\n      np = np / N\n      qnp = qnp / N\n  const val = np === 0 ? Infinity : 10 * Math.log10(sp / np)\n  const valq = qnp === 0 ? Infinity : 10 * Math.log10(sp / qnp)\n  const snrVal = Number.isFinite(val) ? val : null\n  const sqnrVal = Number.isFinite(valq) ? valq : null\n  setSnr(snrVal)\n  setSqnr(sqnrVal)\n  setSnrHistory((prev) => [snrVal, ...prev].slice(0, 100))\n  setSqnrHistory((prev) => [sqnrVal, ...prev].slice(0, 100))\n\n      rafRef.current = requestAnimationFrame(loop)\n    }\n    rafRef.current = requestAnimationFrame(loop)\n    return () => {\n      if (rafRef.current) cancelAnimationFrame(rafRef.current)\n    }\n  }, [bitDepth, noiseLevel])\n\n  const origPoints = toPoints(clean)\n  const qPoints = toPoints(quantized)\n\n  const originalBits = 16\n  const estimatedBits = bitDepth\n  const reduction = ((1 - estimatedBits / originalBits) * 100).toFixed(0)\n\n  const strokeOrig = isDark ? '#60a5fa' : '#fb923c'\n  const strokeQuant = isDark ? '#fb923c' : '#60a5fa'\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-2xl p-6\">\n      <style>{`\n        @keyframes pulse {\n          0% { opacity: 0.6; }\n          50% { opacity: 1; }\n          100% { opacity: 0.6; }\n        }\n        @keyframes fadein {\n          from { opacity: 0; transform: translateY(6px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        .bitdemo-fade { animation: fadein 400ms ease-out; }\n        .bitdemo-pulse { animation: pulse 1400ms ease-in-out infinite; }\n      `}</style>\n      <h3 className=\"text-lg font-semibold text-gray-800 dark:text-white mb-2\">Bit depth demo</h3>\n      <p className=\"text-sm text-gray-600 dark:text-gray-300 mb-3\">Adjust bit depth and noise; the signal animates and SNR updates in real time.</p>\n\n      <div className=\"mb-3\">\n        <label className=\"text-sm text-gray-600 dark:text-gray-300\">Bit depth: <strong>{bitDepth}</strong></label>\n        <input\n          type=\"range\"\n          min=\"1\"\n          max=\"16\"\n          value={bitDepth}\n          onChange={(e) => setBitDepth(Number(e.target.value))}\n          className=\"w-full mt-2\"\n          style={{ accentColor: strokeQuant }}\n        />\n      </div>\n\n      <div className=\"mb-3\">\n        <label className=\"text-sm text-gray-600 dark:text-gray-300\">Noise level: <strong>{(noiseLevel * 100).toFixed(0)}%</strong></label>\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"0.2\"\n          step=\"0.005\"\n          value={noiseLevel}\n          onChange={(e) => setNoiseLevel(Number(e.target.value))}\n          className=\"w-full mt-2\"\n          style={{ accentColor: strokeOrig }}\n        />\n      </div>\n\n      <div className=\"mb-3 bitdemo-fade\">\n        <div className=\"w-full overflow-hidden rounded bg-gray-50 dark:bg-slate-700 p-2\">\n          <svg width=\"100%\" viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"none\" className=\"block mb-1\">\n            <polyline fill=\"none\" stroke={strokeOrig} strokeWidth=\"1.5\" points={origPoints} />\n            <polyline className=\"bitdemo-pulse\" fill=\"none\" stroke={strokeQuant} strokeWidth=\"1.5\" points={qPoints} />\n          </svg>\n          <div className=\"text-xs text-gray-500 dark:text-gray-400\">{isDark ? 'Blue: original, Orange: quantized' : 'Orange: original, Blue: quantized'}</div>\n        </div>\n      </div>\n\n      <div className=\"flex gap-6 items-center\">\n        <div className=\"text-sm text-gray-700 dark:text-gray-200\">Estimated bits/sample: <strong>{estimatedBits} bits</strong></div>\n        <div className=\"text-sm text-gray-700 dark:text-gray-200\">Est. reduction vs 16-bit: <strong>{reduction}%</strong></div>\n        <div className=\"flex items-center gap-3\">\n          <div className=\"text-sm text-gray-700 dark:text-gray-200\">SNR:</div>\n          <div className=\"flex items-center gap-2\">\n            <SparklineMini values={snrHistory} color={snr >= 30 ? '#16a34a' : snr >= 20 ? '#f59e0b' : '#ef4444'} />\n            <div className=\"text-sm text-gray-700 dark:text-gray-200\">{snr == null ? '' : `${snr.toFixed(1)} dB`}</div>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <div className=\"text-sm text-gray-700 dark:text-gray-200\">SQNR:</div>\n          <div className=\"flex items-center gap-2\">\n            <SparklineMini values={sqnrHistory} color={sqnr >= 40 ? '#16a34a' : sqnr >= 25 ? '#f59e0b' : '#ef4444'} />\n            <div className=\"text-sm text-gray-700 dark:text-gray-200\">{sqnr == null ? '' : `${sqnr.toFixed(1)} dB`}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SparklineMini({ values = [], color = '#60a5fa', width = 80, height = 24 }) {\n  if (!values || values.length === 0) return (\n    <svg width={width} height={height} viewBox={`0 0 ${width} ${height}`} className=\"block\">\n      <rect width={width} height={height} fill=\"transparent\" />\n    </svg>\n  )\n  const pts = values.slice(0, 40).reverse()\n  const max = Math.max(...pts.filter(Boolean), 1)\n  const min = Math.min(...pts.filter(Boolean), -1)\n  const range = Math.max(1e-6, max - min)\n  const step = width / Math.max(1, pts.length - 1)\n  const points = pts.map((v, i) => {\n    const x = Math.round(i * step)\n    const y = Math.round(height - ((v - min) / range) * height)\n    return `${x},${y}`\n  }).join(' ')\n  return (\n    <svg width={width} height={height} viewBox={`0 0 ${width} ${height}`} className=\"block\">\n      <polyline fill=\"none\" stroke={color} strokeWidth=\"1.6\" points={points} />\n    </svg>\n  )\n}\n","import * as React from 'react'\n\nfunction Sparkline({ values = [], width = 200, height = 40, color = '#F97316' }) {\n  if (!values || values.length === 0) return null\n  const max = Math.max(...values, 1)\n  const min = Math.min(...values, 0)\n  const len = values.length\n  const step = width / Math.max(1, len - 1)\n  const points = values.map((v, i) => {\n    const x = i * step\n    // invert y so larger values are higher on the chart\n    const y = height - ((v - min) / (max - min || 1)) * height\n    return `${x},${y}`\n  })\n  const d = `M ${points.join(' L ')}`\n  return (\n    <svg width={width} height={height} viewBox={`0 0 ${width} ${height}`} xmlns=\"http://www.w3.org/2000/svg\">\n      <path d={d} fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n    </svg>\n  )\n}\n\nfunction ProducerConsumerDemo({\n  initialConcurrency = 4,\n  initialProduceInterval = 500,\n  initialProcessTime = 800,\n  initialBufferSize = 10,\n  initialMode = 'bounded',\n  title = '',\n  __exposeHandlersRef = null,\n  globalStartId = 0,\n  globalStopId = 0,\n  externalProduceController = null,\n}) {\n  const [running, setRunning] = React.useState(false)\n  const [produceInterval, setProduceInterval] = React.useState(initialProduceInterval) // ms\n  const [processTime, setProcessTime] = React.useState(initialProcessTime) // ms per item\n  const [concurrency, setConcurrency] = React.useState(initialConcurrency)\n  const [bufferSize, setBufferSize] = React.useState(initialBufferSize)\n  const [mode, setMode] = React.useState(initialMode) // 'bounded' | 'hard-buffer' | 'blocking'\n\n  \n  const workersRef = React.useRef(0)\n  const producersRef = React.useRef(null)\n  const queueRef = React.useRef([])\n  const seqRef = React.useRef(0)\n  const runningRef = React.useRef(false)\n  const blockingRef = React.useRef({ cancel: false })\n  const produceIntervalRef = React.useRef(produceInterval)\n  const processTimeRef = React.useRef(processTime)\n\n  const [queue, setQueue] = React.useState([])\n  const [processed, setProcessed] = React.useState(0)\n  const [dropped, setDropped] = React.useState(0)\n  const [avgLatency, setAvgLatency] = React.useState(0)\n  const latenciesRef = React.useRef([])\n\n  // history for sparkline (queue lengths over time)\n  const queueHistoryRef = React.useRef([])\n  const [queueHistory, setQueueHistory] = React.useState([])\n\n  // for simple processed-item animation\n  const [recentProcessed, setRecentProcessed] = React.useState([])\n\n  React.useEffect(() => {\n    return () => {\n      if (producersRef.current) clearInterval(producersRef.current)\n      blockingRef.current.cancel = true\n    }\n  }, [])\n\n  const pushQueueHistory = (len) => {\n    queueHistoryRef.current.push(len)\n    if (queueHistoryRef.current.length > 60) queueHistoryRef.current.shift()\n    setQueueHistory([...queueHistoryRef.current])\n  }\n\n  const start = () => {\n    if (running) return\n    setRunning(true)\n    runningRef.current = true\n    seqRef.current = 0\n    queueRef.current = []\n    setQueue([])\n    setProcessed(0)\n    setDropped(0)\n    latenciesRef.current = []\n    queueHistoryRef.current = []\n    setQueueHistory([])\n\n    // start either a blocking producer loop or a regular interval producer\n    if (mode === 'blocking') {\n      blockingRef.current.cancel = false\n      produceBlockingLoop()\n    } else {\n      // if an external produce controller is provided, rely on it to trigger produceOne()\n      if (externalProduceController) {\n        // ensure consumers start checking\n        scheduleConsumers()\n      } else {\n        producersRef.current = setInterval(() => {\n          produceOne()\n        }, produceInterval)\n        // ensure consumers start checking\n        scheduleConsumers()\n      }\n    }\n  }\n\n  const stop = () => {\n    setRunning(false)\n    runningRef.current = false\n    if (producersRef.current) {\n      clearInterval(producersRef.current)\n      producersRef.current = null\n    }\n    // stop blocking loop if running\n    blockingRef.current.cancel = true\n  }\n\n  const produceOne = () => {\n    const id = ++seqRef.current\n    const now = Date.now()\n\n    // hard-buffer mode: never drop, always enqueue\n    if (mode === 'bounded' && queueRef.current.length >= bufferSize) {\n      setDropped((d) => d + 1)\n      pushQueueHistory(queueRef.current.length)\n      return\n    }\n\n    const item = { id, producedAt: now }\n    queueRef.current = [...queueRef.current, item]\n    setQueue([...queueRef.current])\n    pushQueueHistory(queueRef.current.length)\n    // try to kick consumers\n    scheduleConsumers()\n  }\n\n  // when an external controller ticks, enqueue one item (only when running)\n  const handleExternalTick = React.useCallback(() => {\n    if (!runningRef.current) return\n    // use same produce semantics\n    produceOne()\n  }, [])\n\n  // blocking producer: produce and wait until the produced item is processed\n  const produceBlockingLoop = async () => {\n    while (runningRef.current && !blockingRef.current.cancel && mode === 'blocking') {\n      const id = ++seqRef.current\n      const now = Date.now()\n      const item = { id, producedAt: now }\n      // enqueue for visibility\n      queueRef.current = [...queueRef.current, item]\n      setQueue([...queueRef.current])\n      pushQueueHistory(queueRef.current.length)\n\n      // wait for processing to finish (simulate synchronous producer)\n      await new Promise((resolve) => {\n        // directly simulate processing here so producer truly waits\n        setTimeout(() => {\n          const end = Date.now()\n          const latency = end - item.producedAt\n          latenciesRef.current.push(latency)\n          if (latenciesRef.current.length > 100) latenciesRef.current.shift()\n          const avg = latenciesRef.current.reduce((a, b) => a + b, 0) / latenciesRef.current.length\n          setAvgLatency(Math.round(avg))\n          setProcessed((p) => p + 1)\n\n          // animate processed item\n          setRecentProcessed((r) => {\n            const next = [...r, item.id]\n            if (next.length > 8) next.shift()\n            return next\n          })\n          setTimeout(() => {\n            setRecentProcessed((r) => r.filter((x) => x !== item.id))\n          }, 800)\n\n          // remove from visible queue\n          queueRef.current = queueRef.current.filter((i) => i.id !== id)\n          setQueue([...queueRef.current])\n          pushQueueHistory(queueRef.current.length)\n\n          resolve()\n        }, processTimeRef.current)\n      })\n\n      // optional inter-production delay\n      await new Promise((r) => setTimeout(r, produceIntervalRef.current))\n    }\n  }\n\n  const scheduleConsumers = () => {\n    // try to start workers up to concurrency\n    while (workersRef.current < concurrency && queueRef.current.length > 0) {\n      const item = queueRef.current.shift()\n      setQueue([...queueRef.current])\n      pushQueueHistory(queueRef.current.length)\n      workersRef.current += 1\n      processItem(item)\n    }\n  }\n\n  const processItem = (item) => {\n    setTimeout(() => {\n      const end = Date.now()\n      const latency = end - item.producedAt\n      latenciesRef.current.push(latency)\n      if (latenciesRef.current.length > 100) latenciesRef.current.shift()\n      const avg = latenciesRef.current.reduce((a, b) => a + b, 0) / latenciesRef.current.length\n      setAvgLatency(Math.round(avg))\n      setProcessed((p) => p + 1)\n\n      // animate processed item\n      setRecentProcessed((r) => {\n        const next = [...r, item.id]\n        // keep small history for animation\n        if (next.length > 8) next.shift()\n        return next\n      })\n      setTimeout(() => {\n        setRecentProcessed((r) => r.filter((x) => x !== item.id))\n      }, 800)\n\n      workersRef.current -= 1\n      // if still running, continue consuming\n      if (running) scheduleConsumers()\n    }, processTime)\n  }\n\n  // update producer interval when slider changes\n  React.useEffect(() => {\n    if (!running) return\n    if (producersRef.current) {\n      clearInterval(producersRef.current)\n      producersRef.current = setInterval(() => produceOne(), produceInterval)\n    }\n    produceIntervalRef.current = produceInterval\n  }, [produceInterval])\n\n  // subscribe to external produce controller if provided\n  React.useEffect(() => {\n    if (!externalProduceController) return\n    externalProduceController.subscribe && externalProduceController.subscribe(handleExternalTick)\n    return () => {\n      externalProduceController.unsubscribe && externalProduceController.unsubscribe(handleExternalTick)\n    }\n  }, [externalProduceController, handleExternalTick])\n\n  // update concurrency change: try to schedule\n  React.useEffect(() => {\n    scheduleConsumers()\n  }, [concurrency])\n\n  // keep processTime ref up to date for blocking loop\n  React.useEffect(() => {\n    processTimeRef.current = processTime\n  }, [processTime])\n\n  // if mode changes while running, switch producer strategy\n  React.useEffect(() => {\n    if (!runningRef.current) return\n    if (mode === 'blocking') {\n      // stop interval producer if present\n      if (producersRef.current) {\n        clearInterval(producersRef.current)\n        producersRef.current = null\n      }\n      blockingRef.current.cancel = false\n      produceBlockingLoop()\n    } else {\n      // switch to interval producer\n      blockingRef.current.cancel = true\n      if (!producersRef.current) producersRef.current = setInterval(() => produceOne(), produceIntervalRef.current)\n      scheduleConsumers()\n    }\n  }, [mode])\n\n  // expose start/stop to parent via __exposeHandlersRef\n  React.useEffect(() => {\n    if (__exposeHandlersRef && typeof __exposeHandlersRef === 'object') {\n      __exposeHandlersRef.current = { start, stop }\n    }\n    return () => {\n      if (__exposeHandlersRef && __exposeHandlersRef.current) __exposeHandlersRef.current = null\n    }\n  }, [__exposeHandlersRef])\n\n  // react to global start/stop commands\n  React.useEffect(() => {\n    if (globalStartId && running === false) {\n      start()\n    }\n  }, [globalStartId])\n\n  React.useEffect(() => {\n    if (globalStopId && running === true) {\n      stop()\n    }\n  }, [globalStopId])\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-2xl p-6\">\n      <style>{`\n        @keyframes slideUpFade {\n          from { transform: translateY(8px); opacity: 1 }\n          to { transform: translateY(-8px); opacity: 0 }\n        }\n      `}</style>\n  <h3 className=\"text-lg font-semibold text-gray-800 dark:text-white mb-3\">{title || 'Producer / Consumer demo'}</h3>\n      <p className=\"text-sm text-gray-600 dark:text-gray-300 mb-4\">This demo simulates a producer adding messages to a queue and consumers processing them. Toggle between a bounded queue (drops when full) and a hard-buffer (never drops) to compare behaviour. A sparkline shows recent queue length.</p>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n        <div>\n          <label className=\"text-sm text-gray-600 dark:text-gray-300\">Produce interval: <strong>{produceInterval} ms</strong></label>\n          <input type=\"range\" min=\"50\" max=\"2000\" value={produceInterval} onChange={(e) => setProduceInterval(Number(e.target.value))} className=\"w-full mt-2\" />\n        </div>\n        <div>\n          <label className=\"text-sm text-gray-600 dark:text-gray-300\">Processing time: <strong>{processTime} ms</strong></label>\n          <input type=\"range\" min=\"50\" max=\"3000\" value={processTime} onChange={(e) => setProcessTime(Number(e.target.value))} className=\"w-full mt-2\" />\n        </div>\n        <div>\n          <label className=\"text-sm text-gray-600 dark:text-gray-300\">Concurrency: <strong>{concurrency}</strong></label>\n          <input type=\"range\" min=\"1\" max=\"8\" value={concurrency} onChange={(e) => setConcurrency(Number(e.target.value))} className=\"w-full mt-2\" />\n        </div>\n        <div>\n          <label className=\"text-sm text-gray-600 dark:text-gray-300\">Buffer size: <strong>{bufferSize}</strong></label>\n          <input type=\"range\" min=\"1\" max=\"200\" value={bufferSize} onChange={(e) => setBufferSize(Number(e.target.value))} className=\"w-full mt-2\" />\n        </div>\n      </div>\n\n      <div className=\"flex gap-3 items-center mb-4\">\n        <div className=\"flex gap-2\">\n          <button onClick={start} disabled={running} className=\"text-white bg-orange-600 hover:bg-orange-700 disabled:opacity-50 font-medium rounded-full px-4 py-2\">Start</button>\n          <button onClick={stop} disabled={!running} className=\"text-orange-700 bg-orange-100 hover:bg-orange-200 disabled:opacity-50 font-medium rounded-full px-4 py-2\">Stop</button>\n        </div>\n        <div className=\"ml-4 flex items-center gap-2\">\n          <label className=\"text-sm text-gray-600 dark:text-gray-300\">Mode:</label>\n          <select value={mode} onChange={(e) => setMode(e.target.value)} className=\"text-sm p-1 rounded\">\n            <option value=\"bounded\">Bounded (drops when full)</option>\n            <option value=\"hard-buffer\">Hard buffer (never drops)</option>\n          </select>\n        </div>\n      </div>\n\n      <div className=\"mb-4\">\n        <div className=\"flex justify-between items-center mb-2\">\n          <div className=\"text-sm text-gray-700 dark:text-gray-200\">Queue (size {queue.length})</div>\n          <div className=\"text-xs text-gray-500 dark:text-gray-400\">Recent queue length</div>\n        </div>\n        <div className=\"flex items-center gap-4\">\n          <div className=\"flex-1\">\n            <div className=\"flex flex-wrap gap-1 min-h-10 transition-all\" style={{ position: 'relative' }}>\n              {queue.map((it, idx) => {\n                // horizontal offset so items slide smoothly as earlier items removed\n                const offset = idx * 18\n                const isLast = idx === queue.length - 1\n                const transform = `translateX(${offset}px) scale(${isLast ? 1.03 : 1})`\n                const style = {\n                  transform,\n                  transition: 'transform 380ms cubic-bezier(.22,.9,.27,1), opacity 300ms ease',\n                  display: 'inline-block',\n                  opacity: 1,\n                }\n                return (\n                  <div key={it.id} style={style} className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-slate-700 rounded\">\n                    #{it.id}\n                  </div>\n                )\n              })}\n            </div>\n          </div>\n          <div className=\"w-40 h-10\">\n            <Sparkline values={queueHistory} width={160} height={40} color=\"#f59e0b\" />\n          </div>\n        </div>\n      </div>\n\n      <div className=\"mb-4\">\n        <div className=\"text-sm text-gray-700 dark:text-gray-200 mb-2\">Recently processed (animated):</div>\n        <div className=\"flex gap-2 flex-wrap\">\n          {recentProcessed.map((id) => (\n            <div key={id} aria-hidden style={{ animation: 'slideUpFade 0.8s ease forwards' }} className=\"px-2 py-1 text-xs bg-green-100 dark:bg-green-800 rounded\">\n               #{id}\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm text-gray-700 dark:text-gray-200\">\n        <div>Processed: <strong>{processed}</strong></div>\n        <div>Dropped: <strong>{dropped}</strong></div>\n        <div>Workers: <strong>{workersRef.current}</strong></div>\n        <div>Avg latency: <strong>{avgLatency} ms</strong></div>\n      </div>\n    </div>\n  )\n}\n\nconst ProducerConsumerDemoForward = React.forwardRef((props, ref) => {\n  const handlersRef = React.useRef(null)\n  React.useImperativeHandle(ref, () => ({\n    start: () => handlersRef.current && handlersRef.current.start && handlersRef.current.start(),\n    stop: () => handlersRef.current && handlersRef.current.stop && handlersRef.current.stop(),\n  }))\n  return <ProducerConsumerDemo {...props} __exposeHandlersRef={handlersRef} />\n})\n\nexport default ProducerConsumerDemoForward\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var hypot = Math.hypot;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","export default function(a, b) {\n\n  function compose(x, y) {\n    return x = a(x, y), b(x[0], x[1]);\n  }\n\n  if (a.invert && b.invert) compose.invert = function(x, y) {\n    return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n  };\n\n  return compose;\n}\n","import compose from \"./compose.js\";\nimport {abs, asin, atan2, cos, degrees, pi, radians, sin, tau} from \"./math.js\";\n\nfunction rotationIdentity(lambda, phi) {\n  if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n  return [lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\n\nexport function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? (deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma))\n    : rotationLambda(deltaLambda))\n    : (deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma)\n    : rotationIdentity);\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function(lambda, phi) {\n    lambda += deltaLambda;\n    if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n    return [lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [\n      atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi),\n      asin(k * cosDeltaGamma + y * sinDeltaGamma)\n    ];\n  }\n\n  rotation.invert = function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [\n      atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi),\n      asin(k * cosDeltaPhi - x * sinDeltaPhi)\n    ];\n  };\n\n  return rotation;\n}\n\nexport default function(rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function(coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}\n","export default function noop() {}\n","import noop from \"../noop.js\";\n\nexport default function() {\n  var lines = [],\n      line;\n  return {\n    point: function(x, y, m) {\n      line.push([x, y, m]);\n    },\n    lineStart: function() {\n      lines.push(line = []);\n    },\n    lineEnd: noop,\n    rejoin: function() {\n      if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n    },\n    result: function() {\n      var result = lines;\n      lines = [];\n      line = null;\n      return result;\n    }\n  };\n}\n","import {abs, epsilon} from \"./math.js\";\n\nexport default function(a, b) {\n  return abs(a[0] - b[0]) < epsilon && abs(a[1] - b[1]) < epsilon;\n}\n","import pointEqual from \"../pointEqual.js\";\nimport {epsilon} from \"../math.js\";\n\nfunction Intersection(point, points, other, entry) {\n  this.x = point;\n  this.z = points;\n  this.o = other; // another intersection\n  this.e = entry; // is an entry?\n  this.v = false; // visited\n  this.n = this.p = null; // next & previous\n}\n\n// A generalized polygon clipping algorithm: given a polygon that has been cut\n// into its visible line segments, and rejoins the segments by interpolating\n// along the clip edge.\nexport default function(segments, compareIntersection, startInside, interpolate, stream) {\n  var subject = [],\n      clip = [],\n      i,\n      n;\n\n  segments.forEach(function(segment) {\n    if ((n = segment.length - 1) <= 0) return;\n    var n, p0 = segment[0], p1 = segment[n], x;\n\n    if (pointEqual(p0, p1)) {\n      if (!p0[2] && !p1[2]) {\n        stream.lineStart();\n        for (i = 0; i < n; ++i) stream.point((p0 = segment[i])[0], p0[1]);\n        stream.lineEnd();\n        return;\n      }\n      // handle degenerate cases by moving the point\n      p1[0] += 2 * epsilon;\n    }\n\n    subject.push(x = new Intersection(p0, segment, null, true));\n    clip.push(x.o = new Intersection(p0, null, x, false));\n    subject.push(x = new Intersection(p1, segment, null, false));\n    clip.push(x.o = new Intersection(p1, null, x, true));\n  });\n\n  if (!subject.length) return;\n\n  clip.sort(compareIntersection);\n  link(subject);\n  link(clip);\n\n  for (i = 0, n = clip.length; i < n; ++i) {\n    clip[i].e = startInside = !startInside;\n  }\n\n  var start = subject[0],\n      points,\n      point;\n\n  while (1) {\n    // Find first unvisited intersection.\n    var current = start,\n        isSubject = true;\n    while (current.v) if ((current = current.n) === start) return;\n    points = current.z;\n    stream.lineStart();\n    do {\n      current.v = current.o.v = true;\n      if (current.e) {\n        if (isSubject) {\n          for (i = 0, n = points.length; i < n; ++i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.n.x, 1, stream);\n        }\n        current = current.n;\n      } else {\n        if (isSubject) {\n          points = current.p.z;\n          for (i = points.length - 1; i >= 0; --i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.p.x, -1, stream);\n        }\n        current = current.p;\n      }\n      current = current.o;\n      points = current.z;\n      isSubject = !isSubject;\n    } while (!current.v);\n    stream.lineEnd();\n  }\n}\n\nfunction link(array) {\n  if (!(n = array.length)) return;\n  var n,\n      i = 0,\n      a = array[0],\n      b;\n  while (++i < n) {\n    a.n = b = array[i];\n    b.p = a;\n    a = b;\n  }\n  a.n = b = array[0];\n  b.p = a;\n}\n","// https://github.com/python/cpython/blob/a74eea238f5baba15797e2e8b570d153bc8690a7/Modules/mathmodule.c#L1423\nexport class Adder {\n  constructor() {\n    this._partials = new Float64Array(32);\n    this._n = 0;\n  }\n  add(x) {\n    const p = this._partials;\n    let i = 0;\n    for (let j = 0; j < this._n && j < 32; j++) {\n      const y = p[j],\n        hi = x + y,\n        lo = Math.abs(x) < Math.abs(y) ? x - (hi - y) : y - (hi - x);\n      if (lo) p[i++] = lo;\n      x = hi;\n    }\n    p[i] = x;\n    this._n = i + 1;\n    return this;\n  }\n  valueOf() {\n    const p = this._partials;\n    let n = this._n, x, y, lo, hi = 0;\n    if (n > 0) {\n      hi = p[--n];\n      while (n > 0) {\n        x = hi;\n        y = p[--n];\n        hi = x + y;\n        lo = y - (hi - x);\n        if (lo) break;\n      }\n      if (n > 0 && ((lo < 0 && p[n - 1] < 0) || (lo > 0 && p[n - 1] > 0))) {\n        y = lo * 2;\n        x = hi + y;\n        if (y == x - hi) hi = x;\n      }\n    }\n    return hi;\n  }\n}\n\nexport function fsum(values, valueof) {\n  const adder = new Adder();\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        adder.add(value);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        adder.add(value);\n      }\n    }\n  }\n  return +adder;\n}\n\nexport function fcumsum(values, valueof) {\n  const adder = new Adder();\n  let index = -1;\n  return Float64Array.from(values, valueof === undefined\n      ? v => adder.add(+v || 0)\n      : v => adder.add(+valueof(v, ++index, values) || 0)\n  );\n}\n","import {asin, atan2, cos, sin, sqrt} from \"./math.js\";\n\nexport function spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\n\nexport function cartesian(spherical) {\n  var lambda = spherical[0], phi = spherical[1], cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\n\nexport function cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n}\n\n// TODO return a\nexport function cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\n\nexport function cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n}\n\n// TODO return d\nexport function cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}\n","import {Adder} from \"d3-array\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace} from \"./cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, epsilon2, halfPi, pi, quarterPi, sign, sin, tau} from \"./math.js\";\n\nfunction longitude(point) {\n  return abs(point[0]) <= pi ? point[0] : sign(point[0]) * ((abs(point[0]) + pi) % tau - pi);\n}\n\nexport default function(polygon, point) {\n  var lambda = longitude(point),\n      phi = point[1],\n      sinPhi = sin(phi),\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n\n  var sum = new Adder();\n\n  if (sinPhi === 1) phi = halfPi + epsilon;\n  else if (sinPhi === -1) phi = -halfPi - epsilon;\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = longitude(point0),\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = longitude(point1),\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta;\n\n      // Are the longitudes either side of the points meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  }\n\n  // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon2) ^ (winding & 1);\n}\n","function* flatten(arrays) {\n  for (const array of arrays) {\n    yield* array;\n  }\n}\n\nexport default function merge(arrays) {\n  return Array.from(flatten(arrays));\n}\n","import clipBuffer from \"./buffer.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {epsilon, halfPi} from \"../math.js\";\nimport polygonContains from \"../polygonContains.js\";\nimport {merge} from \"d3-array\";\n\nexport default function(pointVisible, clipLine, interpolate, start) {\n  return function(sink) {\n    var line = clipLine(sink),\n        ringBuffer = clipBuffer(),\n        ringSink = clipLine(ringBuffer),\n        polygonStarted = false,\n        polygon,\n        segments,\n        ring;\n\n    var clip = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        clip.point = pointRing;\n        clip.lineStart = ringStart;\n        clip.lineEnd = ringEnd;\n        segments = [];\n        polygon = [];\n      },\n      polygonEnd: function() {\n        clip.point = point;\n        clip.lineStart = lineStart;\n        clip.lineEnd = lineEnd;\n        segments = merge(segments);\n        var startInside = polygonContains(polygon, start);\n        if (segments.length) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          clipRejoin(segments, compareIntersection, startInside, interpolate, sink);\n        } else if (startInside) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          interpolate(null, null, 1, sink);\n          sink.lineEnd();\n        }\n        if (polygonStarted) sink.polygonEnd(), polygonStarted = false;\n        segments = polygon = null;\n      },\n      sphere: function() {\n        sink.polygonStart();\n        sink.lineStart();\n        interpolate(null, null, 1, sink);\n        sink.lineEnd();\n        sink.polygonEnd();\n      }\n    };\n\n    function point(lambda, phi) {\n      if (pointVisible(lambda, phi)) sink.point(lambda, phi);\n    }\n\n    function pointLine(lambda, phi) {\n      line.point(lambda, phi);\n    }\n\n    function lineStart() {\n      clip.point = pointLine;\n      line.lineStart();\n    }\n\n    function lineEnd() {\n      clip.point = point;\n      line.lineEnd();\n    }\n\n    function pointRing(lambda, phi) {\n      ring.push([lambda, phi]);\n      ringSink.point(lambda, phi);\n    }\n\n    function ringStart() {\n      ringSink.lineStart();\n      ring = [];\n    }\n\n    function ringEnd() {\n      pointRing(ring[0][0], ring[0][1]);\n      ringSink.lineEnd();\n\n      var clean = ringSink.clean(),\n          ringSegments = ringBuffer.result(),\n          i, n = ringSegments.length, m,\n          segment,\n          point;\n\n      ring.pop();\n      polygon.push(ring);\n      ring = null;\n\n      if (!n) return;\n\n      // No intersections.\n      if (clean & 1) {\n        segment = ringSegments[0];\n        if ((m = segment.length - 1) > 0) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          for (i = 0; i < m; ++i) sink.point((point = segment[i])[0], point[1]);\n          sink.lineEnd();\n        }\n        return;\n      }\n\n      // Rejoin connected segments.\n      // TODO reuse ringBuffer.rejoin()?\n      if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n\n      segments.push(ringSegments.filter(validSegment));\n    }\n\n    return clip;\n  };\n}\n\nfunction validSegment(segment) {\n  return segment.length > 1;\n}\n\n// Intersections are sorted along the clip edge. For both antimeridian cutting\n// and circle clipping, the same comparison is used.\nfunction compareIntersection(a, b) {\n  return ((a = a.x)[0] < 0 ? a[1] - halfPi - epsilon : halfPi - a[1])\n       - ((b = b.x)[0] < 0 ? b[1] - halfPi - epsilon : halfPi - b[1]);\n}\n","import clip from \"./index.js\";\nimport {abs, atan, cos, epsilon, halfPi, pi, sin} from \"../math.js\";\n\nexport default clip(\n  function() { return true; },\n  clipAntimeridianLine,\n  clipAntimeridianInterpolate,\n  [-pi, -halfPi]\n);\n\n// Takes a line and cuts into visible segments. Return values: 0 - there were\n// intersections or the line was empty; 1 - no intersections; 2 - there were\n// intersections, and the first and last segments should be rejoined.\nfunction clipAntimeridianLine(stream) {\n  var lambda0 = NaN,\n      phi0 = NaN,\n      sign0 = NaN,\n      clean; // no intersections\n\n  return {\n    lineStart: function() {\n      stream.lineStart();\n      clean = 1;\n    },\n    point: function(lambda1, phi1) {\n      var sign1 = lambda1 > 0 ? pi : -pi,\n          delta = abs(lambda1 - lambda0);\n      if (abs(delta - pi) < epsilon) { // line crosses a pole\n        stream.point(lambda0, phi0 = (phi0 + phi1) / 2 > 0 ? halfPi : -halfPi);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        stream.point(lambda1, phi0);\n        clean = 0;\n      } else if (sign0 !== sign1 && delta >= pi) { // line crosses antimeridian\n        if (abs(lambda0 - sign0) < epsilon) lambda0 -= sign0 * epsilon; // handle degeneracies\n        if (abs(lambda1 - sign1) < epsilon) lambda1 -= sign1 * epsilon;\n        phi0 = clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        clean = 0;\n      }\n      stream.point(lambda0 = lambda1, phi0 = phi1);\n      sign0 = sign1;\n    },\n    lineEnd: function() {\n      stream.lineEnd();\n      lambda0 = phi0 = NaN;\n    },\n    clean: function() {\n      return 2 - clean; // if intersections, rejoin first and last segments\n    }\n  };\n}\n\nfunction clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1) {\n  var cosPhi0,\n      cosPhi1,\n      sinLambda0Lambda1 = sin(lambda0 - lambda1);\n  return abs(sinLambda0Lambda1) > epsilon\n      ? atan((sin(phi0) * (cosPhi1 = cos(phi1)) * sin(lambda1)\n          - sin(phi1) * (cosPhi0 = cos(phi0)) * sin(lambda0))\n          / (cosPhi0 * cosPhi1 * sinLambda0Lambda1))\n      : (phi0 + phi1) / 2;\n}\n\nfunction clipAntimeridianInterpolate(from, to, direction, stream) {\n  var phi;\n  if (from == null) {\n    phi = direction * halfPi;\n    stream.point(-pi, phi);\n    stream.point(0, phi);\n    stream.point(pi, phi);\n    stream.point(pi, 0);\n    stream.point(pi, -phi);\n    stream.point(0, -phi);\n    stream.point(-pi, -phi);\n    stream.point(-pi, 0);\n    stream.point(-pi, phi);\n  } else if (abs(from[0] - to[0]) > epsilon) {\n    var lambda = from[0] < to[0] ? pi : -pi;\n    phi = direction * lambda / 2;\n    stream.point(-lambda, phi);\n    stream.point(0, phi);\n    stream.point(lambda, phi);\n  } else {\n    stream.point(to[0], to[1]);\n  }\n}\n","import {cartesian, cartesianNormalizeInPlace, spherical} from \"./cartesian.js\";\nimport constant from \"./constant.js\";\nimport {acos, cos, degrees, epsilon, radians, sin, tau} from \"./math.js\";\nimport {rotateRadians} from \"./rotation.js\";\n\n// Generates a circle centered at [0, 0], with a given radius and precision.\nexport function circleStream(stream, radius, delta, direction, t0, t1) {\n  if (!delta) return;\n  var cosRadius = cos(radius),\n      sinRadius = sin(radius),\n      step = direction * delta;\n  if (t0 == null) {\n    t0 = radius + direction * tau;\n    t1 = radius - step / 2;\n  } else {\n    t0 = circleRadius(cosRadius, t0);\n    t1 = circleRadius(cosRadius, t1);\n    if (direction > 0 ? t0 < t1 : t0 > t1) t0 += direction * tau;\n  }\n  for (var point, t = t0; direction > 0 ? t > t1 : t < t1; t -= step) {\n    point = spherical([cosRadius, -sinRadius * cos(t), -sinRadius * sin(t)]);\n    stream.point(point[0], point[1]);\n  }\n}\n\n// Returns the signed angle of a cartesian point relative to [cosRadius, 0, 0].\nfunction circleRadius(cosRadius, point) {\n  point = cartesian(point), point[0] -= cosRadius;\n  cartesianNormalizeInPlace(point);\n  var radius = acos(-point[1]);\n  return ((-point[2] < 0 ? -radius : radius) + tau - epsilon) % tau;\n}\n\nexport default function() {\n  var center = constant([0, 0]),\n      radius = constant(90),\n      precision = constant(2),\n      ring,\n      rotate,\n      stream = {point: point};\n\n  function point(x, y) {\n    ring.push(x = rotate(x, y));\n    x[0] *= degrees, x[1] *= degrees;\n  }\n\n  function circle() {\n    var c = center.apply(this, arguments),\n        r = radius.apply(this, arguments) * radians,\n        p = precision.apply(this, arguments) * radians;\n    ring = [];\n    rotate = rotateRadians(-c[0] * radians, -c[1] * radians, 0).invert;\n    circleStream(stream, r, p, 1);\n    c = {type: \"Polygon\", coordinates: [ring]};\n    ring = rotate = null;\n    return c;\n  }\n\n  circle.center = function(_) {\n    return arguments.length ? (center = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), circle) : center;\n  };\n\n  circle.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), circle) : radius;\n  };\n\n  circle.precision = function(_) {\n    return arguments.length ? (precision = typeof _ === \"function\" ? _ : constant(+_), circle) : precision;\n  };\n\n  return circle;\n}\n","import {abs, epsilon} from \"../math.js\";\nimport clipBuffer from \"./buffer.js\";\nimport clipLine from \"./line.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {merge} from \"d3-array\";\n\nvar clipMax = 1e9, clipMin = -clipMax;\n\n// TODO Use d3-polygons polygonContains here for the ring check?\n// TODO Eliminate duplicate buffering in clipBuffer and polygon.push?\n\nexport default function clipRectangle(x0, y0, x1, y1) {\n\n  function visible(x, y) {\n    return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n  }\n\n  function interpolate(from, to, direction, stream) {\n    var a = 0, a1 = 0;\n    if (from == null\n        || (a = corner(from, direction)) !== (a1 = corner(to, direction))\n        || comparePoint(from, to) < 0 ^ direction > 0) {\n      do stream.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n      while ((a = (a + direction + 4) % 4) !== a1);\n    } else {\n      stream.point(to[0], to[1]);\n    }\n  }\n\n  function corner(p, direction) {\n    return abs(p[0] - x0) < epsilon ? direction > 0 ? 0 : 3\n        : abs(p[0] - x1) < epsilon ? direction > 0 ? 2 : 1\n        : abs(p[1] - y0) < epsilon ? direction > 0 ? 1 : 0\n        : direction > 0 ? 3 : 2; // abs(p[1] - y1) < epsilon\n  }\n\n  function compareIntersection(a, b) {\n    return comparePoint(a.x, b.x);\n  }\n\n  function comparePoint(a, b) {\n    var ca = corner(a, 1),\n        cb = corner(b, 1);\n    return ca !== cb ? ca - cb\n        : ca === 0 ? b[1] - a[1]\n        : ca === 1 ? a[0] - b[0]\n        : ca === 2 ? a[1] - b[1]\n        : b[0] - a[0];\n  }\n\n  return function(stream) {\n    var activeStream = stream,\n        bufferStream = clipBuffer(),\n        segments,\n        polygon,\n        ring,\n        x__, y__, v__, // first point\n        x_, y_, v_, // previous point\n        first,\n        clean;\n\n    var clipStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: polygonStart,\n      polygonEnd: polygonEnd\n    };\n\n    function point(x, y) {\n      if (visible(x, y)) activeStream.point(x, y);\n    }\n\n    function polygonInside() {\n      var winding = 0;\n\n      for (var i = 0, n = polygon.length; i < n; ++i) {\n        for (var ring = polygon[i], j = 1, m = ring.length, point = ring[0], a0, a1, b0 = point[0], b1 = point[1]; j < m; ++j) {\n          a0 = b0, a1 = b1, point = ring[j], b0 = point[0], b1 = point[1];\n          if (a1 <= y1) { if (b1 > y1 && (b0 - a0) * (y1 - a1) > (b1 - a1) * (x0 - a0)) ++winding; }\n          else { if (b1 <= y1 && (b0 - a0) * (y1 - a1) < (b1 - a1) * (x0 - a0)) --winding; }\n        }\n      }\n\n      return winding;\n    }\n\n    // Buffer geometry within a polygon and then clip it en masse.\n    function polygonStart() {\n      activeStream = bufferStream, segments = [], polygon = [], clean = true;\n    }\n\n    function polygonEnd() {\n      var startInside = polygonInside(),\n          cleanInside = clean && startInside,\n          visible = (segments = merge(segments)).length;\n      if (cleanInside || visible) {\n        stream.polygonStart();\n        if (cleanInside) {\n          stream.lineStart();\n          interpolate(null, null, 1, stream);\n          stream.lineEnd();\n        }\n        if (visible) {\n          clipRejoin(segments, compareIntersection, startInside, interpolate, stream);\n        }\n        stream.polygonEnd();\n      }\n      activeStream = stream, segments = polygon = ring = null;\n    }\n\n    function lineStart() {\n      clipStream.point = linePoint;\n      if (polygon) polygon.push(ring = []);\n      first = true;\n      v_ = false;\n      x_ = y_ = NaN;\n    }\n\n    // TODO rather than special-case polygons, simply handle them separately.\n    // Ideally, coincident intersection points should be jittered to avoid\n    // clipping issues.\n    function lineEnd() {\n      if (segments) {\n        linePoint(x__, y__);\n        if (v__ && v_) bufferStream.rejoin();\n        segments.push(bufferStream.result());\n      }\n      clipStream.point = point;\n      if (v_) activeStream.lineEnd();\n    }\n\n    function linePoint(x, y) {\n      var v = visible(x, y);\n      if (polygon) ring.push([x, y]);\n      if (first) {\n        x__ = x, y__ = y, v__ = v;\n        first = false;\n        if (v) {\n          activeStream.lineStart();\n          activeStream.point(x, y);\n        }\n      } else {\n        if (v && v_) activeStream.point(x, y);\n        else {\n          var a = [x_ = Math.max(clipMin, Math.min(clipMax, x_)), y_ = Math.max(clipMin, Math.min(clipMax, y_))],\n              b = [x = Math.max(clipMin, Math.min(clipMax, x)), y = Math.max(clipMin, Math.min(clipMax, y))];\n          if (clipLine(a, b, x0, y0, x1, y1)) {\n            if (!v_) {\n              activeStream.lineStart();\n              activeStream.point(a[0], a[1]);\n            }\n            activeStream.point(b[0], b[1]);\n            if (!v) activeStream.lineEnd();\n            clean = false;\n          } else if (v) {\n            activeStream.lineStart();\n            activeStream.point(x, y);\n            clean = false;\n          }\n        }\n      }\n      x_ = x, y_ = y, v_ = v;\n    }\n\n    return clipStream;\n  };\n}\n","export default function(a, b, x0, y0, x1, y1) {\n  var ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (t0 > 0) a[0] = ax + t0 * dx, a[1] = ay + t0 * dy;\n  if (t1 < 1) b[0] = ax + t1 * dx, b[1] = ay + t1 * dy;\n  return true;\n}\n","export default x => x;\n","export default function(methods) {\n  return {\n    stream: transformer(methods)\n  };\n}\n\nexport function transformer(methods) {\n  return function(stream) {\n    var s = new TransformStream;\n    for (var key in methods) s[key] = methods[key];\n    s.stream = stream;\n    return s;\n  };\n}\n\nfunction TransformStream() {}\n\nTransformStream.prototype = {\n  constructor: TransformStream,\n  point: function(x, y) { this.stream.point(x, y); },\n  sphere: function() { this.stream.sphere(); },\n  lineStart: function() { this.stream.lineStart(); },\n  lineEnd: function() { this.stream.lineEnd(); },\n  polygonStart: function() { this.stream.polygonStart(); },\n  polygonEnd: function() { this.stream.polygonEnd(); }\n};\n","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n","import noop from \"../noop.js\";\n\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;\n","import {default as geoStream} from \"../stream.js\";\nimport boundsStream from \"../path/bounds.js\";\n\nfunction fit(projection, fitBounds, object) {\n  var clip = projection.clipExtent && projection.clipExtent();\n  projection.scale(150).translate([0, 0]);\n  if (clip != null) projection.clipExtent(null);\n  geoStream(object, projection.stream(boundsStream));\n  fitBounds(boundsStream.result());\n  if (clip != null) projection.clipExtent(clip);\n  return projection;\n}\n\nexport function fitExtent(projection, extent, object) {\n  return fit(projection, function(b) {\n    var w = extent[1][0] - extent[0][0],\n        h = extent[1][1] - extent[0][1],\n        k = Math.min(w / (b[1][0] - b[0][0]), h / (b[1][1] - b[0][1])),\n        x = +extent[0][0] + (w - k * (b[1][0] + b[0][0])) / 2,\n        y = +extent[0][1] + (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitSize(projection, size, object) {\n  return fitExtent(projection, [[0, 0], size], object);\n}\n\nexport function fitWidth(projection, width, object) {\n  return fit(projection, function(b) {\n    var w = +width,\n        k = w / (b[1][0] - b[0][0]),\n        x = (w - k * (b[1][0] + b[0][0])) / 2,\n        y = -k * b[0][1];\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitHeight(projection, height, object) {\n  return fit(projection, function(b) {\n    var h = +height,\n        k = h / (b[1][1] - b[0][1]),\n        x = -k * b[0][0],\n        y = (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n","import {cartesian} from \"../cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, radians, sqrt} from \"../math.js\";\nimport {transformer} from \"../transform.js\";\n\nvar maxDepth = 16, // maximum depth of subdivision\n    cosMinDistance = cos(30 * radians); // cos(minimum angular distance)\n\nexport default function(project, delta2) {\n  return +delta2 ? resample(project, delta2) : resampleNone(project);\n}\n\nfunction resampleNone(project) {\n  return transformer({\n    point: function(x, y) {\n      x = project(x, y);\n      this.stream.point(x[0], x[1]);\n    }\n  });\n}\n\nfunction resample(project, delta2) {\n\n  function resampleLineTo(x0, y0, lambda0, a0, b0, c0, x1, y1, lambda1, a1, b1, c1, depth, stream) {\n    var dx = x1 - x0,\n        dy = y1 - y0,\n        d2 = dx * dx + dy * dy;\n    if (d2 > 4 * delta2 && depth--) {\n      var a = a0 + a1,\n          b = b0 + b1,\n          c = c0 + c1,\n          m = sqrt(a * a + b * b + c * c),\n          phi2 = asin(c /= m),\n          lambda2 = abs(abs(c) - 1) < epsilon || abs(lambda0 - lambda1) < epsilon ? (lambda0 + lambda1) / 2 : atan2(b, a),\n          p = project(lambda2, phi2),\n          x2 = p[0],\n          y2 = p[1],\n          dx2 = x2 - x0,\n          dy2 = y2 - y0,\n          dz = dy * dx2 - dx * dy2;\n      if (dz * dz / d2 > delta2 // perpendicular projected distance\n          || abs((dx * dx2 + dy * dy2) / d2 - 0.5) > 0.3 // midpoint close to an end\n          || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) { // angular distance\n        resampleLineTo(x0, y0, lambda0, a0, b0, c0, x2, y2, lambda2, a /= m, b /= m, c, depth, stream);\n        stream.point(x2, y2);\n        resampleLineTo(x2, y2, lambda2, a, b, c, x1, y1, lambda1, a1, b1, c1, depth, stream);\n      }\n    }\n  }\n  return function(stream) {\n    var lambda00, x00, y00, a00, b00, c00, // first point\n        lambda0, x0, y0, a0, b0, c0; // previous point\n\n    var resampleStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() { stream.polygonStart(); resampleStream.lineStart = ringStart; },\n      polygonEnd: function() { stream.polygonEnd(); resampleStream.lineStart = lineStart; }\n    };\n\n    function point(x, y) {\n      x = project(x, y);\n      stream.point(x[0], x[1]);\n    }\n\n    function lineStart() {\n      x0 = NaN;\n      resampleStream.point = linePoint;\n      stream.lineStart();\n    }\n\n    function linePoint(lambda, phi) {\n      var c = cartesian([lambda, phi]), p = project(lambda, phi);\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x0 = p[0], y0 = p[1], lambda0 = lambda, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n      stream.point(x0, y0);\n    }\n\n    function lineEnd() {\n      resampleStream.point = point;\n      stream.lineEnd();\n    }\n\n    function ringStart() {\n      lineStart();\n      resampleStream.point = ringPoint;\n      resampleStream.lineEnd = ringEnd;\n    }\n\n    function ringPoint(lambda, phi) {\n      linePoint(lambda00 = lambda, phi), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n      resampleStream.point = linePoint;\n    }\n\n    function ringEnd() {\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x00, y00, lambda00, a00, b00, c00, maxDepth, stream);\n      resampleStream.lineEnd = lineEnd;\n      lineEnd();\n    }\n\n    return resampleStream;\n  };\n}\n","import clipAntimeridian from \"../clip/antimeridian.js\";\nimport clipCircle from \"../clip/circle.js\";\nimport clipRectangle from \"../clip/rectangle.js\";\nimport compose from \"../compose.js\";\nimport identity from \"../identity.js\";\nimport {cos, degrees, radians, sin, sqrt} from \"../math.js\";\nimport {rotateRadians} from \"../rotation.js\";\nimport {transformer} from \"../transform.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\nimport resample from \"./resample.js\";\n\nvar transformRadians = transformer({\n  point: function(x, y) {\n    this.stream.point(x * radians, y * radians);\n  }\n});\n\nfunction transformRotate(rotate) {\n  return transformer({\n    point: function(x, y) {\n      var r = rotate(x, y);\n      return this.stream.point(r[0], r[1]);\n    }\n  });\n}\n\nfunction scaleTranslate(k, dx, dy, sx, sy) {\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [dx + k * x, dy - k * y];\n  }\n  transform.invert = function(x, y) {\n    return [(x - dx) / k * sx, (dy - y) / k * sy];\n  };\n  return transform;\n}\n\nfunction scaleTranslateRotate(k, dx, dy, sx, sy, alpha) {\n  if (!alpha) return scaleTranslate(k, dx, dy, sx, sy);\n  var cosAlpha = cos(alpha),\n      sinAlpha = sin(alpha),\n      a = cosAlpha * k,\n      b = sinAlpha * k,\n      ai = cosAlpha / k,\n      bi = sinAlpha / k,\n      ci = (sinAlpha * dy - cosAlpha * dx) / k,\n      fi = (sinAlpha * dx + cosAlpha * dy) / k;\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [a * x - b * y + dx, dy - b * x - a * y];\n  }\n  transform.invert = function(x, y) {\n    return [sx * (ai * x - bi * y + ci), sy * (fi - bi * x - ai * y)];\n  };\n  return transform;\n}\n\nexport default function projection(project) {\n  return projectionMutator(function() { return project; })();\n}\n\nexport function projectionMutator(projectAt) {\n  var project,\n      k = 150, // scale\n      x = 480, y = 250, // translate\n      lambda = 0, phi = 0, // center\n      deltaLambda = 0, deltaPhi = 0, deltaGamma = 0, rotate, // pre-rotate\n      alpha = 0, // post-rotate angle\n      sx = 1, // reflectX\n      sy = 1, // reflectX\n      theta = null, preclip = clipAntimeridian, // pre-clip angle\n      x0 = null, y0, x1, y1, postclip = identity, // post-clip extent\n      delta2 = 0.5, // precision\n      projectResample,\n      projectTransform,\n      projectRotateTransform,\n      cache,\n      cacheStream;\n\n  function projection(point) {\n    return projectRotateTransform(point[0] * radians, point[1] * radians);\n  }\n\n  function invert(point) {\n    point = projectRotateTransform.invert(point[0], point[1]);\n    return point && [point[0] * degrees, point[1] * degrees];\n  }\n\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transformRadians(transformRotate(rotate)(preclip(projectResample(postclip(cacheStream = stream)))));\n  };\n\n  projection.preclip = function(_) {\n    return arguments.length ? (preclip = _, theta = undefined, reset()) : preclip;\n  };\n\n  projection.postclip = function(_) {\n    return arguments.length ? (postclip = _, x0 = y0 = x1 = y1 = null, reset()) : postclip;\n  };\n\n  projection.clipAngle = function(_) {\n    return arguments.length ? (preclip = +_ ? clipCircle(theta = _ * radians) : (theta = null, clipAntimeridian), reset()) : theta * degrees;\n  };\n\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipRectangle(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, recenter()) : k;\n  };\n\n  projection.translate = function(_) {\n    return arguments.length ? (x = +_[0], y = +_[1], recenter()) : [x, y];\n  };\n\n  projection.center = function(_) {\n    return arguments.length ? (lambda = _[0] % 360 * radians, phi = _[1] % 360 * radians, recenter()) : [lambda * degrees, phi * degrees];\n  };\n\n  projection.rotate = function(_) {\n    return arguments.length ? (deltaLambda = _[0] % 360 * radians, deltaPhi = _[1] % 360 * radians, deltaGamma = _.length > 2 ? _[2] % 360 * radians : 0, recenter()) : [deltaLambda * degrees, deltaPhi * degrees, deltaGamma * degrees];\n  };\n\n  projection.angle = function(_) {\n    return arguments.length ? (alpha = _ % 360 * radians, recenter()) : alpha * degrees;\n  };\n\n  projection.reflectX = function(_) {\n    return arguments.length ? (sx = _ ? -1 : 1, recenter()) : sx < 0;\n  };\n\n  projection.reflectY = function(_) {\n    return arguments.length ? (sy = _ ? -1 : 1, recenter()) : sy < 0;\n  };\n\n  projection.precision = function(_) {\n    return arguments.length ? (projectResample = resample(projectTransform, delta2 = _ * _), reset()) : sqrt(delta2);\n  };\n\n  projection.fitExtent = function(extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n\n  projection.fitSize = function(size, object) {\n    return fitSize(projection, size, object);\n  };\n\n  projection.fitWidth = function(width, object) {\n    return fitWidth(projection, width, object);\n  };\n\n  projection.fitHeight = function(height, object) {\n    return fitHeight(projection, height, object);\n  };\n\n  function recenter() {\n    var center = scaleTranslateRotate(k, 0, 0, sx, sy, alpha).apply(null, project(lambda, phi)),\n        transform = scaleTranslateRotate(k, x - center[0], y - center[1], sx, sy, alpha);\n    rotate = rotateRadians(deltaLambda, deltaPhi, deltaGamma);\n    projectTransform = compose(project, transform);\n    projectRotateTransform = compose(rotate, projectTransform);\n    projectResample = resample(projectTransform, delta2);\n    return reset();\n  }\n\n  function reset() {\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  return function() {\n    project = projectAt.apply(this, arguments);\n    projection.invert = project.invert && invert;\n    return recenter();\n  };\n}\n","import {cartesian, cartesianAddInPlace, cartesianCross, cartesianDot, cartesianScale, spherical} from \"../cartesian.js\";\nimport {circleStream} from \"../circle.js\";\nimport {abs, cos, epsilon, pi, radians, sqrt} from \"../math.js\";\nimport pointEqual from \"../pointEqual.js\";\nimport clip from \"./index.js\";\n\nexport default function(radius) {\n  var cr = cos(radius),\n      delta = 2 * radians,\n      smallRadius = cr > 0,\n      notHemisphere = abs(cr) > epsilon; // TODO optimise for this common case\n\n  function interpolate(from, to, direction, stream) {\n    circleStream(stream, radius, delta, direction, from, to);\n  }\n\n  function visible(lambda, phi) {\n    return cos(lambda) * cos(phi) > cr;\n  }\n\n  // Takes a line and cuts into visible segments. Return values used for polygon\n  // clipping: 0 - there were intersections or the line was empty; 1 - no\n  // intersections 2 - there were intersections, and the first and last segments\n  // should be rejoined.\n  function clipLine(stream) {\n    var point0, // previous point\n        c0, // code for previous point\n        v0, // visibility of previous point\n        v00, // visibility of first point\n        clean; // no intersections\n    return {\n      lineStart: function() {\n        v00 = v0 = false;\n        clean = 1;\n      },\n      point: function(lambda, phi) {\n        var point1 = [lambda, phi],\n            point2,\n            v = visible(lambda, phi),\n            c = smallRadius\n              ? v ? 0 : code(lambda, phi)\n              : v ? code(lambda + (lambda < 0 ? pi : -pi), phi) : 0;\n        if (!point0 && (v00 = v0 = v)) stream.lineStart();\n        if (v !== v0) {\n          point2 = intersect(point0, point1);\n          if (!point2 || pointEqual(point0, point2) || pointEqual(point1, point2))\n            point1[2] = 1;\n        }\n        if (v !== v0) {\n          clean = 0;\n          if (v) {\n            // outside going in\n            stream.lineStart();\n            point2 = intersect(point1, point0);\n            stream.point(point2[0], point2[1]);\n          } else {\n            // inside going out\n            point2 = intersect(point0, point1);\n            stream.point(point2[0], point2[1], 2);\n            stream.lineEnd();\n          }\n          point0 = point2;\n        } else if (notHemisphere && point0 && smallRadius ^ v) {\n          var t;\n          // If the codes for two points are different, or are both zero,\n          // and there this segment intersects with the small circle.\n          if (!(c & c0) && (t = intersect(point1, point0, true))) {\n            clean = 0;\n            if (smallRadius) {\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n            } else {\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1], 3);\n            }\n          }\n        }\n        if (v && (!point0 || !pointEqual(point0, point1))) {\n          stream.point(point1[0], point1[1]);\n        }\n        point0 = point1, v0 = v, c0 = c;\n      },\n      lineEnd: function() {\n        if (v0) stream.lineEnd();\n        point0 = null;\n      },\n      // Rejoin first and last segments if there were intersections and the first\n      // and last points were visible.\n      clean: function() {\n        return clean | ((v00 && v0) << 1);\n      }\n    };\n  }\n\n  // Intersects the great circle between a and b with the clip circle.\n  function intersect(a, b, two) {\n    var pa = cartesian(a),\n        pb = cartesian(b);\n\n    // We have two planes, n1.p = d1 and n2.p = d2.\n    // Find intersection line p(t) = c1 n1 + c2 n2 + t (n1  n2).\n    var n1 = [1, 0, 0], // normal\n        n2 = cartesianCross(pa, pb),\n        n2n2 = cartesianDot(n2, n2),\n        n1n2 = n2[0], // cartesianDot(n1, n2),\n        determinant = n2n2 - n1n2 * n1n2;\n\n    // Two polar points.\n    if (!determinant) return !two && a;\n\n    var c1 =  cr * n2n2 / determinant,\n        c2 = -cr * n1n2 / determinant,\n        n1xn2 = cartesianCross(n1, n2),\n        A = cartesianScale(n1, c1),\n        B = cartesianScale(n2, c2);\n    cartesianAddInPlace(A, B);\n\n    // Solve |p(t)|^2 = 1.\n    var u = n1xn2,\n        w = cartesianDot(A, u),\n        uu = cartesianDot(u, u),\n        t2 = w * w - uu * (cartesianDot(A, A) - 1);\n\n    if (t2 < 0) return;\n\n    var t = sqrt(t2),\n        q = cartesianScale(u, (-w - t) / uu);\n    cartesianAddInPlace(q, A);\n    q = spherical(q);\n\n    if (!two) return q;\n\n    // Two intersection points.\n    var lambda0 = a[0],\n        lambda1 = b[0],\n        phi0 = a[1],\n        phi1 = b[1],\n        z;\n\n    if (lambda1 < lambda0) z = lambda0, lambda0 = lambda1, lambda1 = z;\n\n    var delta = lambda1 - lambda0,\n        polar = abs(delta - pi) < epsilon,\n        meridian = polar || delta < epsilon;\n\n    if (!polar && phi1 < phi0) z = phi0, phi0 = phi1, phi1 = z;\n\n    // Check that the first point is between a and b.\n    if (meridian\n        ? polar\n          ? phi0 + phi1 > 0 ^ q[1] < (abs(q[0] - lambda0) < epsilon ? phi0 : phi1)\n          : phi0 <= q[1] && q[1] <= phi1\n        : delta > pi ^ (lambda0 <= q[0] && q[0] <= lambda1)) {\n      var q1 = cartesianScale(u, (-w + t) / uu);\n      cartesianAddInPlace(q1, A);\n      return [q, spherical(q1)];\n    }\n  }\n\n  // Generates a 4-bit vector representing the location of a point relative to\n  // the small circle's bounding box.\n  function code(lambda, phi) {\n    var r = smallRadius ? radius : pi - radius,\n        code = 0;\n    if (lambda < -r) code |= 1; // left\n    else if (lambda > r) code |= 2; // right\n    if (phi < -r) code |= 4; // below\n    else if (phi > r) code |= 8; // above\n    return code;\n  }\n\n  return clip(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-pi, radius - pi]);\n}\n","import {atan, exp, halfPi, log, pi, tan, tau} from \"../math.js\";\nimport rotation from \"../rotation.js\";\nimport projection from \"./index.js\";\n\nexport function mercatorRaw(lambda, phi) {\n  return [lambda, log(tan((halfPi + phi) / 2))];\n}\n\nmercatorRaw.invert = function(x, y) {\n  return [x, 2 * atan(exp(y)) - halfPi];\n};\n\nexport default function() {\n  return mercatorProjection(mercatorRaw)\n      .scale(961 / tau);\n}\n\nexport function mercatorProjection(project) {\n  var m = projection(project),\n      center = m.center,\n      scale = m.scale,\n      translate = m.translate,\n      clipExtent = m.clipExtent,\n      x0 = null, y0, x1, y1; // clip extent\n\n  m.scale = function(_) {\n    return arguments.length ? (scale(_), reclip()) : scale();\n  };\n\n  m.translate = function(_) {\n    return arguments.length ? (translate(_), reclip()) : translate();\n  };\n\n  m.center = function(_) {\n    return arguments.length ? (center(_), reclip()) : center();\n  };\n\n  m.clipExtent = function(_) {\n    return arguments.length ? ((_ == null ? x0 = y0 = x1 = y1 = null : (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1])), reclip()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  function reclip() {\n    var k = pi * scale(),\n        t = m(rotation(m.rotate()).invert([0, 0]));\n    return clipExtent(x0 == null\n        ? [[t[0] - k, t[1] - k], [t[0] + k, t[1] + k]] : project === mercatorRaw\n        ? [[Math.max(t[0] - k, x0), y0], [Math.min(t[0] + k, x1), y1]]\n        : [[x0, Math.max(t[1] - k, y0)], [x1, Math.min(t[1] + k, y1)]]);\n  }\n\n  return reclip();\n}\n","import {Adder} from \"d3-array\";\nimport {abs} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar areaSum = new Adder(),\n    areaRingSum = new Adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum = new Adder();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum = new Adder();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n","import {sqrt} from \"../math.js\";\n\n// TODO Enforce positive area for exterior, negative area for interior?\n\nvar X0 = 0,\n    Y0 = 0,\n    Z0 = 0,\n    X1 = 0,\n    Y1 = 0,\n    Z1 = 0,\n    X2 = 0,\n    Y2 = 0,\n    Z2 = 0,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar centroidStream = {\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.point = centroidPoint;\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  },\n  result: function() {\n    var centroid = Z2 ? [X2 / Z2, Y2 / Z2]\n        : Z1 ? [X1 / Z1, Y1 / Z1]\n        : Z0 ? [X0 / Z0, Y0 / Z0]\n        : [NaN, NaN];\n    X0 = Y0 = Z0 =\n    X1 = Y1 = Z1 =\n    X2 = Y2 = Z2 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint(x, y) {\n  X0 += x;\n  Y0 += y;\n  ++Z0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream.point = centroidPointLine;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0, dy = y - y0, z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingStart() {\n  centroidStream.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd() {\n  centroidPointRing(x00, y00);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream.point = centroidPointRing;\n  centroidPoint(x00 = x0 = x, y00 = y0 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n\n  z = y0 * x - x0 * y;\n  X2 += z * (x0 + x);\n  Y2 += z * (y0 + y);\n  Z2 += z * 3;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nexport default centroidStream;\n","import {tau} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nexport default function PathContext(context) {\n  this._context = context;\n}\n\nPathContext.prototype = {\n  _radius: 4.5,\n  pointRadius: function(_) {\n    return this._radius = _, this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._context.closePath();\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._context.moveTo(x, y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._context.lineTo(x, y);\n        break;\n      }\n      default: {\n        this._context.moveTo(x + this._radius, y);\n        this._context.arc(x, y, this._radius, 0, tau);\n        break;\n      }\n    }\n  },\n  result: noop\n};\n","import {Adder} from \"d3-array\";\nimport {sqrt} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar lengthSum = new Adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar lengthStream = {\n  point: noop,\n  lineStart: function() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function() {\n    lengthRing = true;\n  },\n  polygonEnd: function() {\n    lengthRing = null;\n  },\n  result: function() {\n    var length = +lengthSum;\n    lengthSum = new Adder();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;\n","// Simple caching for constant-radius points.\nlet cacheDigits, cacheAppend, cacheRadius, cacheCircle;\n\nexport default class PathString {\n  constructor(digits) {\n    this._append = digits == null ? append : appendRound(digits);\n    this._radius = 4.5;\n    this._ = \"\";\n  }\n  pointRadius(_) {\n    this._radius = +_;\n    return this;\n  }\n  polygonStart() {\n    this._line = 0;\n  }\n  polygonEnd() {\n    this._line = NaN;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {\n    if (this._line === 0) this._ += \"Z\";\n    this._point = NaN;\n  }\n  point(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._append`M${x},${y}`;\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._append`L${x},${y}`;\n        break;\n      }\n      default: {\n        this._append`M${x},${y}`;\n        if (this._radius !== cacheRadius || this._append !== cacheAppend) {\n          const r = this._radius;\n          const s = this._;\n          this._ = \"\"; // stash the old string so we can cache the circle path fragment\n          this._append`m0,${r}a${r},${r} 0 1,1 0,${-2 * r}a${r},${r} 0 1,1 0,${2 * r}z`;\n          cacheRadius = r;\n          cacheAppend = this._append;\n          cacheCircle = this._;\n          this._ = s;\n        }\n        this._ += cacheCircle;\n        break;\n      }\n    }\n  }\n  result() {\n    const result = this._;\n    this._ = \"\";\n    return result.length ? result : null;\n  }\n}\n\nfunction append(strings) {\n  let i = 1;\n  this._ += strings[0];\n  for (const j = strings.length; i < j; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  const d = Math.floor(digits);\n  if (!(d >= 0)) throw new RangeError(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  if (d !== cacheDigits) {\n    const k = 10 ** d;\n    cacheDigits = d;\n    cacheAppend = function append(strings) {\n      let i = 1;\n      this._ += strings[0];\n      for (const j = strings.length; i < j; ++i) {\n        this._ += Math.round(arguments[i] * k) / k + strings[i];\n      }\n    };\n  }\n  return cacheAppend;\n}\n","export default function(x) {\n  return x;\n}\n","import reverse from \"./reverse.js\";\nimport transform from \"./transform.js\";\n\nexport default function(topology, o) {\n  if (typeof o === \"string\") o = topology.objects[o];\n  return o.type === \"GeometryCollection\"\n      ? {type: \"FeatureCollection\", features: o.geometries.map(function(o) { return feature(topology, o); })}\n      : feature(topology, o);\n}\n\nfunction feature(topology, o) {\n  var id = o.id,\n      bbox = o.bbox,\n      properties = o.properties == null ? {} : o.properties,\n      geometry = object(topology, o);\n  return id == null && bbox == null ? {type: \"Feature\", properties: properties, geometry: geometry}\n      : bbox == null ? {type: \"Feature\", id: id, properties: properties, geometry: geometry}\n      : {type: \"Feature\", id: id, bbox: bbox, properties: properties, geometry: geometry};\n}\n\nexport function object(topology, o) {\n  var transformPoint = transform(topology.transform),\n      arcs = topology.arcs;\n\n  function arc(i, points) {\n    if (points.length) points.pop();\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k) {\n      points.push(transformPoint(a[k], k));\n    }\n    if (i < 0) reverse(points, n);\n  }\n\n  function point(p) {\n    return transformPoint(p);\n  }\n\n  function line(arcs) {\n    var points = [];\n    for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n    if (points.length < 2) points.push(points[0]); // This should never happen per the specification.\n    return points;\n  }\n\n  function ring(arcs) {\n    var points = line(arcs);\n    while (points.length < 4) points.push(points[0]); // This may happen if an arc has only two points.\n    return points;\n  }\n\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n\n  function geometry(o) {\n    var type = o.type, coordinates;\n    switch (type) {\n      case \"GeometryCollection\": return {type: type, geometries: o.geometries.map(geometry)};\n      case \"Point\": coordinates = point(o.coordinates); break;\n      case \"MultiPoint\": coordinates = o.coordinates.map(point); break;\n      case \"LineString\": coordinates = line(o.arcs); break;\n      case \"MultiLineString\": coordinates = o.arcs.map(line); break;\n      case \"Polygon\": coordinates = polygon(o.arcs); break;\n      case \"MultiPolygon\": coordinates = o.arcs.map(polygon); break;\n      default: return null;\n    }\n    return {type: type, coordinates: coordinates};\n  }\n\n  return geometry(o);\n}\n","import identity from \"./identity.js\";\n\nexport default function(transform) {\n  if (transform == null) return identity;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2, n = input.length, output = new Array(n);\n    output[0] = (x0 += input[0]) * kx + dx;\n    output[1] = (y0 += input[1]) * ky + dy;\n    while (j < n) output[j] = input[j], ++j;\n    return output;\n  };\n}\n","export default function(array, n) {\n  var t, j = array.length, i = j - n;\n  while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n}\n","import * as React from 'react'\nimport { geoMercator, geoPath } from 'd3-geo'\nimport { feature } from 'topojson-client'\n\nexport default function ConnectivityMap({ data = [], width = 800, height = 320, pointScale = 12 }) {\n  const [landGeo, setLandGeo] = React.useState(null)\n  const [topoKey, setTopoKey] = React.useState(null)\n  const [loadError, setLoadError] = React.useState(null)\n  const canvasRef = React.useRef(null)\n  const [imageHref, setImageHref] = React.useState(null)\n  const clipIdRef = React.useRef(`land-clip-${Math.random().toString(36).slice(2,9)}`)\n  const maxTotal = Math.max(0.00001, ...data.map((d) => d.total || 0))\n\n  React.useEffect(() => {\n    let cancelled = false\n    // try to fetch a topojson file at runtime from /data/world-110m.json\n    fetch('/data/world-110m.json')\n      .then((r) => {\n        if (!r.ok) throw new Error('TopoJSON fetch failed')\n        return r.json()\n      })\n      .then((topo) => {\n        try { console.log('ConnectivityMap: topojson fetched, objects=', Object.keys(topo.objects || {})) } catch(e) {}\n        if (cancelled) return\n        // topo.objects.land or topo.objects['countries'] may exist depending on file\n        if (!topo.objects) throw new Error('TopoJSON has no objects')\n        const keys = Object.keys(topo.objects)\n        // prefer common names but fall back to first object\n        const preferred = ['land', 'ne_110m_land', 'coastline', 'countries', 'world']\n        let chosenKey = keys.find((k) => preferred.includes(k)) || keys[0]\n        const landObj = topo.objects[chosenKey]\n        if (landObj) {\n          const geo = feature(topo, landObj)\n          try { console.log('ConnectivityMap: chosen topo key=', chosenKey) } catch (e) {}\n          setTopoKey(chosenKey)\n          setLandGeo(geo)\n        } else {\n          // fallback: try to convert entire topo to geo\n          try {\n            const k2 = Object.keys(topo.objects || {})[0]\n            if (k2) {\n              const geo = feature(topo, topo.objects[k2])\n              setTopoKey(k2)\n              setLandGeo(geo)\n            } else {\n              setLandGeo(null)\n            }\n          } catch (e) {\n            setLandGeo(null)\n            setLoadError(e.message || String(e))\n          }\n        }\n      })\n      .catch(() => {\n        // on any failure, leave landGeo null (component will render graticule fallback)\n        setLandGeo(null)\n        setLoadError('fetch_failed')\n      })\n    return () => {\n      cancelled = true\n    }\n  }, [])\n\n  // prepare projection and path generator\n  const projection = React.useMemo(() => {\n    const p = geoMercator().scale(1).translate([0, 0])\n    return p\n  }, [])\n\n  // compute path generator bound and auto-fit projection when landGeo available\n  const pathGenerator = React.useMemo(() => geoPath().projection(projection), [projection])\n\n  React.useEffect(() => {\n    if (!landGeo) return\n    try {\n      // let d3 compute appropriate scale and translate for us\n      if (typeof projection.fitSize === 'function') {\n        // small padding\n        projection.fitSize([Math.max(20, width - 20), Math.max(20, height - 20)], landGeo)\n      } else {\n        // fallback to manual bounds-based fit\n        const bounds = pathGenerator.bounds(landGeo)\n        const dx = bounds[1][0] - bounds[0][0]\n        const dy = bounds[1][1] - bounds[0][1]\n        if (dx > 0 && dy > 0) {\n          const scale = Math.min((width - 20) / dx, (height - 20) / dy)\n          const translate = [(width - scale * (bounds[1][0] + bounds[0][0])) / 2, (height - scale * (bounds[1][1] + bounds[0][1])) / 2]\n          projection.scale(scale).translate(translate)\n        }\n      }\n    } catch (e) {\n      // ignore fit errors and leave projection as-is\n    }\n  }, [landGeo, width, height, pathGenerator, projection])\n\n  // create a simple IDW-based heatmap on a canvas and export to data URL, clipped to land later\n  React.useEffect(() => {\n    if (!landGeo) return\n    if (typeof window === 'undefined') return\n    if (!projection || typeof projection.invert !== 'function') return\n\n    // create a temporary canvas\n    const cvs = document.createElement('canvas')\n    cvs.width = Math.max(1, Math.round(width))\n    cvs.height = Math.max(1, Math.round(height))\n    const ctx = cvs.getContext('2d')\n\n    // parameters\n    const step = 3 // pixel sampling step\n    const power = 2\n    const eps = 1e-8\n\n    const pts = data.map(d => ({ lon: d.lon, lat: d.lat, v: d.total || 0 }))\n    if (!pts.length) { \n      setImageHref(null); \n      try { window.__connectivity_heatmap_ready = false } catch (e) {}\n      try { window.__connectivity_heatmap_href = null } catch (e) {}\n      try { window.__connectivity_heatmap_length = null } catch (e) {}\n      return \n    }\n\n    // simple color ramp: blue -> yellow -> red\n    const lerp = (a,b,t) => a + (b-a)*t\n    const lerpColor = (c1,c2,t) => [\n      Math.round(lerp(c1[0], c2[0], t)),\n      Math.round(lerp(c1[1], c2[1], t)),\n      Math.round(lerp(c1[2], c2[2], t))\n    ]\n    const blue=[59,130,246], yellow=[250,204,21], red=[239,68,68]\n    const colorFor = (t) => {\n      const v = Math.max(0, Math.min(1, t))\n      if (v <= 0.5) return lerpColor(blue, yellow, v/0.5)\n      return lerpColor(yellow, red, (v-0.5)/0.5)\n    }\n\n    for (let py = 0; py < cvs.height; py += step) {\n      for (let px = 0; px < cvs.width; px += step) {\n        let lonlat = null\n        try { lonlat = projection.invert([px, py]) } catch (e) { lonlat = null }\n        if (!lonlat) { ctx.clearRect(px, py, step, step); continue }\n        const [lon, lat] = lonlat\n        let num = 0, den = 0\n        for (let i=0;i<pts.length;i++){\n          const dx = lon - pts[i].lon\n          const dy = lat - pts[i].lat\n          const dist2 = dx*dx + dy*dy\n          if (dist2 < eps) { num = pts[i].v; den = 1; break }\n          const w = 1 / Math.pow(dist2, power/2)\n          num += pts[i].v * w\n          den += w\n        }\n        const val = den === 0 ? 0 : num/den\n        const t = Math.max(0, Math.min(1, val / maxTotal))\n        const rgb = colorFor(t)\n        ctx.fillStyle = `rgb(${rgb[0]},${rgb[1]},${rgb[2]})`\n        ctx.fillRect(px, py, step, step)\n      }\n    }\n\n    try {\n      const url = cvs.toDataURL('image/png')\n      try {\n        console.log('ConnectivityMap: generated heatmap data URL length=', url.length)\n        try { window.__connectivity_heatmap_length = url.length } catch (e) {}\n        try { window.__connectivity_heatmap_href = url } catch (e) {}\n        try { window.__connectivity_heatmap_ready = true } catch (e) {}\n      } catch (e) {}\n      setImageHref(url)\n    } catch (e) {\n      setImageHref(null)\n      try { window.__connectivity_heatmap_ready = false } catch (e) {}\n      try { window.__connectivity_heatmap_href = null } catch (e) {}\n      try { window.__connectivity_heatmap_length = null } catch (e) {}\n    }\n\n    // no cleanup needed\n  }, [landGeo, data, projection, width, height, maxTotal])\n\n  return (\n    <div className=\"w-full overflow-hidden rounded relative\">\n      {/* Visible loading/error overlay */}\n      {(!landGeo && !loadError) && (\n        <div className=\"map-loading-overlay absolute inset-0 flex items-center justify-center bg-white/60 dark:bg-black/40 z-10\" aria-live=\"polite\">\n          <div className=\"text-sm text-gray-700 dark:text-gray-200 font-medium\">Loading basemap</div>\n        </div>\n      )}\n      {loadError && (\n        <div className=\"map-loading-overlay absolute inset-0 flex items-center justify-center bg-white/80 dark:bg-black/60 z-10\" role=\"alert\">\n          <div className=\"text-sm text-red-600 dark:text-red-400 font-medium\">Basemap failed to load</div>\n        </div>\n      )}\n\n      <svg viewBox={`0 0 ${width} ${height}`} width=\"100%\" height={height} xmlns=\"http://www.w3.org/2000/svg\" className=\"relative z-20\">\n        <defs>\n          {landGeo && <clipPath id={clipIdRef.current}><path d={pathGenerator(landGeo)} /></clipPath>}\n        </defs>\n        <rect x={0} y={0} width={width} height={height} fill=\"transparent\" />\n\n        {imageHref && landGeo && (\n            <image href={imageHref} xlinkHref={imageHref} x={0} y={0} width={width} height={height} preserveAspectRatio=\"none\" clipPath={`url(#${clipIdRef.current})`} style={{ pointerEvents: 'none' }} />\n        )}\n\n        {/* land basemap: only draw land polygons (no country borders) */}\n        {landGeo ? (\n          <g>\n            <path d={pathGenerator(landGeo)} fill=\"#cbd5e1\" stroke=\"none\" />\n          </g>\n        ) : (\n          // fallback: simple graticule if topojson not available\n          <g stroke=\"#94a3b8\" strokeOpacity={0.2} strokeWidth={0.5} fill=\"none\">\n            {Array.from({ length: 13 }, (_, i) => -180 + i * 30).map((lon) => {\n              const points = []\n              for (let lat = -85; lat <= 85; lat += 2) {\n                let coords = null\n                try {\n                  coords = projection([lon, lat])\n                } catch (e) {\n                  coords = null\n                }\n                if (!coords) continue\n                const [x, y] = coords\n                if (!isFinite(x) || !isFinite(y)) continue\n                points.push(`${x},${y}`)\n              }\n              // only render if we have a valid polyline\n              return points.length > 1 ? <polyline key={`lon-${lon}`} points={points.join(' ')} /> : null\n            })}\n            {Array.from({ length: 7 }, (_, i) => -90 + i * 30).map((lat) => {\n              const points = []\n              for (let lon = -180; lon <= 180; lon += 2) {\n                let coords = null\n                try {\n                  coords = projection([lon, lat])\n                } catch (e) {\n                  coords = null\n                }\n                if (!coords) continue\n                const [x, y] = coords\n                if (!isFinite(x) || !isFinite(y)) continue\n                points.push(`${x},${y}`)\n              }\n              return points.length > 1 ? <polyline key={`lat-${lat}`} points={points.join(' ')} /> : null\n            })}\n          </g>\n        )}\n\n        {/* points */}\n        <g>\n          {data.map((p, i) => {\n            let coords\n            try {\n              coords = projection([p.lon, p.lat])\n            } catch (e) {\n              coords = null\n            }\n            if (!coords || !isFinite(coords[0]) || !isFinite(coords[1])) return null\n            const [x, y] = coords\n            const r = 4 + (p.total / maxTotal) * pointScale\n            const alpha = 0.5 + (p.total / maxTotal) * 0.5\n            const fill = `rgba(249,115,22,${alpha})`\n            return (\n              <g key={`${p.city}-${i}`}>\n                <circle cx={x} cy={y} r={r} fill={fill} stroke=\"#fff\" strokeWidth={0.6} />\n                <title>{`${p.city}, ${p.country}: ${p.total.toFixed(3)}`}</title>\n              </g>\n            )\n          })}\n        </g>\n        {/* invisible debug text for load status (aria-hidden) */}\n        <desc>{landGeo ? `topo: ${topoKey || 'loaded'}` : loadError ? `error:${loadError}` : 'loading topojson'}</desc>\n      </svg>\n    </div>\n  )\n}\n","import identity from \"../identity.js\";\nimport stream from \"../stream.js\";\nimport pathArea from \"./area.js\";\nimport pathBounds from \"./bounds.js\";\nimport pathCentroid from \"./centroid.js\";\nimport PathContext from \"./context.js\";\nimport pathMeasure from \"./measure.js\";\nimport PathString from \"./string.js\";\n\nexport default function(projection, context) {\n  let digits = 3,\n      pointRadius = 4.5,\n      projectionStream,\n      contextStream;\n\n  function path(object) {\n    if (object) {\n      if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n      stream(object, projectionStream(contextStream));\n    }\n    return contextStream.result();\n  }\n\n  path.area = function(object) {\n    stream(object, projectionStream(pathArea));\n    return pathArea.result();\n  };\n\n  path.measure = function(object) {\n    stream(object, projectionStream(pathMeasure));\n    return pathMeasure.result();\n  };\n\n  path.bounds = function(object) {\n    stream(object, projectionStream(pathBounds));\n    return pathBounds.result();\n  };\n\n  path.centroid = function(object) {\n    stream(object, projectionStream(pathCentroid));\n    return pathCentroid.result();\n  };\n\n  path.projection = function(_) {\n    if (!arguments.length) return projection;\n    projectionStream = _ == null ? (projection = null, identity) : (projection = _).stream;\n    return path;\n  };\n\n  path.context = function(_) {\n    if (!arguments.length) return context;\n    contextStream = _ == null ? (context = null, new PathString(digits)) : new PathContext(context = _);\n    if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n    return path;\n  };\n\n  path.pointRadius = function(_) {\n    if (!arguments.length) return pointRadius;\n    pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n    return path;\n  };\n\n  path.digits = function(_) {\n    if (!arguments.length) return digits;\n    if (_ == null) digits = null;\n    else {\n      const d = Math.floor(_);\n      if (!(d >= 0)) throw new RangeError(`invalid digits: ${_}`);\n      digits = d;\n    }\n    if (context === null) contextStream = new PathString(digits);\n    return path;\n  };\n\n  return path.projection(projection).digits(digits).context(context);\n}\n","import * as React from \"react\"\n\n\nimport Layout from \"../../components/layout\"\nimport Seo from \"../../components/seo\"\nimport { Link, graphql } from \"gatsby\"\nimport CIRPICMELogo from \"../../images/project/tpp/cirp-icme-logo.webp\"\nimport CSCLogo from \"../../images/project/china-scholarship-logo.jpg\"\n\nimport ExponentialBackoffDemo from \"../../components/ExponentialBackoffDemo\"\nimport BitDepthDemo from \"../../components/BitDepthDemo\"\nimport ProducerConsumerDemo from \"../../components/ProducerConsumerDemo\"\nimport ConnectivityMap from \"../../components/ConnectivityMap\"\n\nconst TppPage = () => {\n  const pcRefA = React.useRef(null)\n  const pcRefB = React.useRef(null)\n  const [globalStartId, setGlobalStartId] = React.useState(0)\n  const [globalStopId, setGlobalStopId] = React.useState(0)\n  // shared external produce controller for frame-aligned ticks\n  const sharedControllerRef = React.useRef(null)\n  if (!sharedControllerRef.current) {\n    // simple pub/sub controller with start/stop via RAF\n    const subs = new Set()\n    let rafId = null\n    let runningController = false\n    let interval = 500\n    const tick = () => {\n      subs.forEach((s) => { try { s() } catch (e) {} })\n      if (runningController) rafId = window.requestAnimationFrame(() => setTimeout(tick, interval))\n    }\n    sharedControllerRef.current = {\n      subscribe: (fn) => subs.add(fn),\n      unsubscribe: (fn) => subs.delete(fn),\n      start: (ms = 500) => {\n        interval = ms\n        if (runningController) return\n        runningController = true\n        rafId = window.requestAnimationFrame(() => setTimeout(tick, interval))\n      },\n      stop: () => {\n        runningController = false\n        if (rafId) { window.cancelAnimationFrame(rafId); rafId = null }\n      },\n      tick: () => { subs.forEach((s) => { try { s() } catch (e) {} }) }\n    }\n  }\n\n  const startAll = () => {\n    // If both child refs expose start(), call them in the same requestAnimationFrame\n    const a = pcRefA.current && pcRefA.current.start\n    const b = pcRefB.current && pcRefB.current.start\n    if (a || b) {\n      // start the shared controller first so that external ticks drive both producers\n      const ms = 500\n      sharedControllerRef.current.start(ms)\n      if (typeof window !== 'undefined' && window.requestAnimationFrame) {\n        window.requestAnimationFrame(() => {\n          try { a && a() } catch (e) { /* ignore */ }\n          try { b && b() } catch (e) { /* ignore */ }\n        })\n        return\n      }\n      try { a && a() } catch (e) {}\n      try { b && b() } catch (e) {}\n      return\n    }\n    // fallback: bump counter to notify children that listen to globalStartId\n    setGlobalStartId((s) => s + 1)\n  }\n  const stopAll = () => {\n    const a = pcRefA.current && pcRefA.current.stop\n    const b = pcRefB.current && pcRefB.current.stop\n    // stop shared controller first\n    sharedControllerRef.current.stop()\n    if (a || b) {\n      if (typeof window !== 'undefined' && window.requestAnimationFrame) {\n        window.requestAnimationFrame(() => {\n          try { a && a() } catch (e) {}\n          try { b && b() } catch (e) {}\n        })\n        return\n      }\n      try { a && a() } catch (e) {}\n      try { b && b() } catch (e) {}\n      return\n    }\n    setGlobalStopId((s) => s + 1)\n  }\n\n  // aggregate per-city average latency (ms) from the table data\n  const latencyData = [\n    { city: 'London (UK)', avg: 8.7155 },\n    { city: 'Frankfurt (DE)', avg: 19.9665 },\n    { city: 'Hong Kong (CN)', avg: 203.4077 },\n    { city: 'Johannesburg (ZA)', avg: 176.4508 },\n    { city: 'Boston (US)', avg: 85.8510 },\n    { city: 'Sydney (AU)', avg: 290.1947 },\n  ]\n  const maxLatency = Math.max(...latencyData.map((d) => d.avg))\n  // connectivity points (lon/lat and 'total' weight) from user-provided data\n  const connectivityData = [\n    { city: 'Manchester', country: 'United Kingdom', lon: -2.233333, lat: 53.466667, total: 0.072540816 },\n    { city: 'Manchester', country: 'United Kingdom', lon: -2.233333, lat: 53.466667, total: 0.073260934 },\n    { city: 'London', country: 'United Kingdom', lon: -0.1275, lat: 51.5072, total: 0.081294395 },\n    { city: 'Saint-Ghislain', country: 'Belgium', lon: 3.816667, lat: 50.45, total: 0.086977237 },\n    { city: 'Frankfurt am Main', country: 'Germany', lon: 8.682222, lat: 50.110556, total: 0.094171566 },\n    { city: 'Zrich', country: 'Switzerland', lon: 8.541111, lat: 47.374444, total: 0.098617197 },\n    { city: 'Eemshaven', country: 'Netherlands', lon: 6.831111, lat: 53.448333, total: 0.112108961 },\n    { city: 'Saint-Ghislain', country: 'Belgium', lon: 3.816667, lat: 50.45, total: 0.113438645 },\n    { city: 'Warsaw', country: 'Poland', lon: 21.010833, lat: 52.23, total: 0.129099566 },\n    { city: 'Montreal', country: 'Canada', lon: -73.554167, lat: 45.508889, total: 0.165897553 },\n    { city: 'Ashburn', country: 'United States', lon: -77.471111, lat: 39.03, total: 0.181601105 },\n    { city: 'Moncks Corner', country: 'United States', lon: -80, lat: 33.2, total: 0.186080395 },\n    { city: 'Warsaw', country: 'Poland', lon: 21.010833, lat: 52.23, total: 0.195250026 },\n    { city: 'Salt Lake City', country: 'United States', lon: -111.883333, lat: 40.75, total: 0.210651053 },\n    { city: 'Las Vegas', country: 'United States', lon: -115.1447, lat: 36.1692, total: 0.215828947 },\n    { city: 'Dalles', country: 'United States', lon: -121.1828, lat: 45.6011, total: 0.226093263 },\n    { city: 'Osasco', country: 'Brazil', lon: -46.791944, lat: -23.532778, total: 0.309826382 },\n    { city: 'Zhanghua', country: 'China', lon: 120.533333, lat: 24.066667, total: 0.313292461 },\n    { city: 'Mumbai', country: 'India', lon: 72.8775, lat: 19.076111, total: 0.317267303 },\n    { city: 'Singapore', country: 'Singapore', lon: 103.833333, lat: 1.283333, total: 0.322318421 },\n    { city: 'Seoul', country: 'South Korea', lon: 126.99, lat: 37.56, total: 0.335438158 },\n    { city: 'Hong Kong', country: 'China', lon: 114.2, lat: 22.3, total: 0.342026408 },\n    { city: 'Jakarta', country: 'Indonesia', lon: 106.8275, lat: -6.175, total: 0.345206789 },\n    { city: 'Sydney', country: 'Australia', lon: 151.211111, lat: -33.859972, total: 0.349120408 },\n  ]\n  const maxTotal = Math.max(...connectivityData.map((d) => d.total))\n\n  return (\n    <Layout>\n    <section className=\"bg-gray-50 dark:bg-slate-600\">\n      <div className=\"w-full mx-auto max-w-(--breakpoint-xl) px-6 py-32\">\n  <h1 class=\"text-8xl md:text-12xl font-mont text-center font-bold text-orange-400 dark:text-white ebpc-animated ebpc-title\">EBPC</h1>\n        <h4 class=\"text-2xl mt-2 font-medium text-slate-700 dark:text-white text-center\">Real Time Cloud Computing Framework for Tool Condition Monitoring</h4>\n        \n\n        <p className=\"mt-16 mb-0 font-bold text-gray-400 max-w-none dark:text-gray-300 text-center\">\n          <Link to=\"#\">Jiduo Zhang</Link><sup>1*</sup>, &nbsp;\n          <Link className=\"hover:text-purple-600 dark:hover:text-purple-400 transition-all duration-150 ease-in-out\" to=\"https://research.manchester.ac.uk/en/persons/robert.heinemann\">Robert Heinemann</Link><sup>1</sup> and&nbsp;\n          <Link className=\"hover:text-purple-600 dark:hover:text-purple-400 transition-all duration-150 ease-in-out\" to=\"https://research.manchester.ac.uk/en/persons/ottojan.bakker\">Otto Jan Bakker</Link><sup>1</sup>\n        </p>\n        <p className=\"font-bold text-gray-400 max-w-none dark:text-gray-300 mt-0 text-center\"><sup>1</sup> Department of Mechanical and Aerospace Engineering, The University of Manchester</p>\n\n        <div className=\"mt-12 flex-1 justify-items-center\">\n          <div className=\"flex justify-center\">\n            <Link className=\"text-white bg-orange-700 shrink-0\n            hover:bg-orange-800 focus:outline-hidden \n            focus:ring-4 focus:ring-orange-300 \n            font-medium rounded-full text-normal px-5 py-2.5 \n            text-center mr-2 mb-2 dark:bg-blue-600\n              dark:hover:bg-blue-700 dark:focus:ring-blue-800\" to=\"https://link.springer.com/article/10.1007/s10845-025-02657-7\">Read our paper</Link>\n            {/* <Link className=\"px-5 py-2.5 \n             text-blue-700 dark:text-blue-100\n            text-center mr-2 mb-2\" \n            to=\"https://github.com/kidozh/tpp-cnn-network-for-incidence-identification\">View data</Link> */}\n          </div>\n\n        </div>\n      </div>\n\n    </section>\n\n    <section className=\"bg-gray-100 dark:bg-slate-700\">\n      <div className=\"w-full mx-auto max-w-6xl max-w-(--breakpoint-l) px-6 py-8\">\n        <h1 className=\"text-2xl font-montserrat font-bold text-gray-800 dark:text-white max-w-none\">\n          Highlights of our framework:\n        </h1>\n      </div>\n      <div className=\"w-full mx-auto max-w-6xl max-w-(--breakpoint-xl) px-6 grid grid-cols-1 md:grid-cols-2 gap-8\">\n        <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-2xl overflow-hidden\n      hover:bg-linear-to-r hover:from-orange-200 hover:to-red-200\n      hover:scale-105 dark:hover:bg-linear-to-r dark:hover:from-cyan-500 dark:hover:to-blue-500\n      group hover:transition-all duration-500 ease-in-out p-6\">\n          <h2 className=\"text-2xl font-montserrat font-bold text-gray-800 dark:text-white\">Exponential Backoff Traffic Control</h2>\n          <hr className=\"h-1 my-8 w-32 group-hover:w-full mt-2 mb-4 bg-orange-500 border-orange-500 group-hover:transition-all ease-in-out duration-800\n            border-2 dark:bg-indigo-500 dark:border-indigo-500\n             dark:group-hover:bg-slate-100 dark:group-hover:border-slate-100\n              group-hover:bg-red-600 group-hover:border-red-600\" />\n          <p className=\"mt-4 font-light text-normal text-gray-700\n            dark:text-gray-200 border-b-orange-700\">\n              Progressive traffic control mechanism to adaptively adjust data transmission rates based on network conditions, ensuring efficient and reliable communication between edge devices and the cloud.\n            </p>\n        </div>\n        <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-2xl overflow-hidden\n      hover:bg-linear-to-r hover:from-orange-200 hover:to-red-200\n      hover:scale-105 dark:hover:bg-linear-to-r dark:hover:from-cyan-500 dark:hover:to-blue-500\n      group hover:transition-all duration-500 ease-in-out p-6\">\n          <h2 className=\"text-2xl font-montserrat font-bold text-gray-800 dark:text-white\">Data minimisation</h2>\n          <hr className=\"h-1 my-8 w-32 group-hover:w-full mt-2 mb-4 bg-orange-500 border-orange-500 group-hover:transition-all ease-in-out duration-800\n            border-2 dark:bg-indigo-500 dark:border-indigo-500\n             dark:group-hover:bg-slate-100 dark:group-hover:border-slate-100\n              group-hover:bg-red-600 group-hover:border-red-600\" />\n          <p className=\"mt-4  font-light text-normal text-gray-700\n            dark:text-gray-200 border-b-orange-700\">\n              The compression from the aspect of data shape<sup>[1]</sup>, dimension and bit depth is applied to reduce the data size for transmission, while retaining the essential information for accurate tool condition monitoring.\n\n            </p>\n            <p className=\"mt-4  font-light text-normal text-gray-700\n            dark:text-gray-200 border-b-orange-700\"><small>[1]: <Link to=\"/project/manchester-unit\" className=\"text-orange-400 dark:text-indigo-500\">Minimum Sufficient Unit Theory</Link></small></p>\n        </div>\n\n        <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-2xl overflow-hidden\n      hover:bg-linear-to-r hover:from-orange-200 hover:to-red-200\n      hover:scale-105 dark:hover:bg-linear-to-r dark:hover:from-cyan-500 dark:hover:to-blue-500\n      group hover:transition-all duration-500 ease-in-out p-6\">\n          <h2 className=\"text-2xl font-montserrat font-bold text-gray-800 dark:text-white\">Producer-Consumer Task Scheduling</h2>\n          <hr className=\"h-1 my-8 w-32 group-hover:w-full mt-2 mb-4 bg-orange-500 border-orange-500 group-hover:transition-all ease-in-out duration-800\n            border-2 dark:bg-indigo-500 dark:border-indigo-500\n             dark:group-hover:bg-slate-100 dark:group-hover:border-slate-100\n              group-hover:bg-red-600 group-hover:border-red-600\" />\n          <p className=\"mt-4  font-light text-normal text-gray-700\n            dark:text-gray-200 border-b-orange-700\">\n              Efficient task scheduling mechanism that manages resource allocation effectively, ensuring timely processing of data and responsiveness of the tool condition monitoring system for all clients.\n            </p>\n        </div>\n\n        <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-2xl overflow-hidden\n      hover:bg-linear-to-r hover:from-orange-200 hover:to-red-200\n      hover:scale-105 dark:hover:bg-linear-to-r dark:hover:from-cyan-500 dark:hover:to-blue-500\n      group hover:transition-all duration-500 ease-in-out p-6\">\n          <h2 className=\"text-2xl font-montserrat font-bold text-gray-800 dark:text-white\">Dynamic Task Prioritisation</h2>\n          <hr className=\"h-1 my-8 w-32 group-hover:w-full mt-2 mb-4 bg-orange-500 border-orange-500 group-hover:transition-all ease-in-out duration-800\n            border-2 dark:bg-indigo-500 dark:border-indigo-500\n             dark:group-hover:bg-slate-100 dark:group-hover:border-slate-100\n              group-hover:bg-red-600 group-hover:border-red-600\" />\n          <p className=\"mt-4  font-light text-normal text-gray-700\n            dark:text-gray-200 border-b-orange-700\">\n              Self-adaptive prioritization mechanism that dynamically adjusts task priorities based on real-time system conditions and requirements, ensuring critical tasks are processed promptly for effective tool condition monitoring.\n            </p>\n        </div>\n        \n      </div>\n    </section>\n\n    <section className=\"bg-gray-50 dark:bg-slate-800\">\n      <div className=\"w-full mx-auto max-w-6xl px-6 py-12\">\n        <h2 className=\"text-2xl font-montserrat font-bold text-gray-800 dark:text-white mb-6\">Exponential backoff In Client  interactive demo</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <ExponentialBackoffDemo />\n          <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-2xl p-6\">\n            <h3 className=\"text-xl font-semibold text-gray-800 dark:text-white\">How it works</h3>\n            <p className=\"mt-3 text-gray-700 dark:text-gray-200 text-sm\">\n              This interactive demo runs a continuous sender that measures simulated network round-trip times (RTT) and adapts the send interval in real time. A \"Network success\" slider controls the probability that a request succeeds; when a request fails the sender immediately doubles the send interval (exponential backoff). When a request succeeds the demo uses the observed RTT to adapt the interval: if the observed RTT is more than twice the current send interval the interval is doubled; if the observed RTT is less than half the current send interval the interval is halved. Small random jitter is added to adjustments to avoid synchronized retries.\n            </p>\n            <p className=\"mt-3 text-gray-600 dark:text-gray-300 text-sm\"><strong>Parameters:</strong> baseDelay = 100ms, adaptive rules (failure  2; success  double if RTT &gt; 2interval, halve if RTT &lt; interval/2), jitter up to 10% of the interval, cap = 20000ms. Use the controls to change simulated RTT and success rate and press Start to run the demo.</p>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <section className=\"bg-slate-100 dark:bg-slate-700\">\n      <div className=\"w-full mx-auto max-w-(--breakpoint-xl) px-6 py-16\">\n        <h1 className=\"text-4xl font-montserrat text-center font-bold mt-2 text-orange-700 dark:text-blue-200 max-w-none\">\n          Data compression\n        </h1>\n        \n        <div className=\"w-full mx-auto max-w-6xl px-6 py-8\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <BitDepthDemo />\n            <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-2xl p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 dark:text-white \">How it works</h3>\n              <p className=\"mt-3 text-gray-700 dark:text-gray-200 text-sm\">\n                This interactive demo allows you to explore the effects of bit depth reduction on signal quality. The slider lets you adjust the bit depth from 1 to 8 bits per channel, allowing you to see how reducing the bit depth affects the signal's appearance. This is particularly useful for understanding how data compression can be achieved by reducing the number of bits used to represent each feature in the signal.\n              </p>\n              <p className=\"mt-3 text-gray-600 dark:text-gray-300 text-sm\"><strong>Note:</strong> Reducing bit depth can lead to a loss of precision information and may introduce visual artifacts, especially at very low bit depths. When the quantized noise exceeds the SNR of features in the original signal, features can become interferred, leading to a degradation in perceived quality.</p>\n            </div>\n\n          </div>\n          \n        </div>\n        <p className=\"text-2xl mt-4 text-center font-medium text-slate-500 dark:text-slate-200 max-w-none\">\n          <small>Check the <Link to=\"/project/manchester-unit\" className=\"text-orange-500 dark:text-blue-200 hover:text-orange-700\n           transition-all duration-150 ease-in-out underline\n           dark:hover:text-blue-200\">Minimum Sufficient Unit Theory</Link> for the compression from the aspect of data shape. </small>\n        </p>\n        {/* Data size table removed per request */}\n      </div>\n    </section>\n\n    <section className=\"bg-white dark:bg-slate-800\">\n      <div className=\"w-full mx-auto max-w-6xl px-6 py-12\">\n        <h2 className=\"text-2xl font-montserrat font-bold text-gray-800 dark:text-white mb-6\">Producer / Consumer  interactive demo (comparison)</h2>\n        <p className=\"text-sm text-gray-600 dark:text-gray-300\">Compare the two demos side-by-side. The right-hand demo is configured with concurrency = 1 to simulate a traditional architecture that awaits the completion of each task before starting the next. Observe the average latency of both condition and the traditional methods can not handle the situation as latency keep surged and the system are overwhelmed by the requests.</p>\n        <div className=\"mb-4 mt-2 flex gap-3\">\n          <button onClick={startAll} className=\"text-white bg-orange-600 hover:bg-orange-700 font-medium rounded-full px-4 py-2\">Start all</button>\n          <button onClick={stopAll} className=\"text-orange-700 bg-orange-100 hover:bg-orange-200 font-medium rounded-full px-4 py-2\">Stop all</button>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <ProducerConsumerDemo ref={pcRefA} title=\"Concurrency = 4 (default)\" initialConcurrency={4} initialProduceInterval={500} initialProcessTime={800} initialBufferSize={20} initialMode={'bounded'} globalStartId={globalStartId} globalStopId={globalStopId} externalProduceController={sharedControllerRef.current} />\n          <ProducerConsumerDemo ref={pcRefB} title=\"Concurrency = 1 (Traditional architecture)\" initialConcurrency={1} initialProduceInterval={500} initialProcessTime={800} initialBufferSize={20} initialMode={'bounded'} globalStartId={globalStartId} globalStopId={globalStopId} externalProduceController={sharedControllerRef.current} />\n        </div>\n        \n      </div>\n    </section>\n\n    <section className=\"bg-gray-50 dark:bg-slate-800\">\n      <div className=\"w-full mx-auto max-w-6xl px-6 py-12\">\n        <h2 className=\"text-2xl font-montserrat font-bold text-gray-800 dark:text-white mb-6\">Deploy worldwide for Tool Condition Monitoring with minimal delay</h2>\n        <div className=\"flex justify-center\">\n          <div className=\"w-full max-w-3xl p-6 bg-white dark:bg-slate-800 rounded-lg shadow\">\n            \n            <div className=\"mt-6\">\n              <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-200 mb-2\">Connectivity points (weighted)</h4>\n              <div className=\"w-full\">\n                <ConnectivityMap data={connectivityData} width={800} height={320} pointScale={12} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <section className=\"bg-gray-100 dark:bg-slate-700\">\n      <div className=\"w-full mx-auto max-w-(--breakpoint-xl) px-6 py-16\">\n        <h1 className=\"text-4xl font-montserrat text-center font-bold mt-2 text-orange-700 dark:text-blue-200 max-w-none\">\n          Conclusions\n        </h1>\n        \n        <div className=\"w-full mx-auto max-w-6xl px-6 py-8\">\n          <ul className=\"list-disc list-inside text-lg font-normal text-gray-700 dark:text-gray-200\">\n                  <li>We proposed a novel cloud computing framework EBPC for real-time tool condition monitoring, which incorporates exponential backoff-based traffic control, data minimisation, producer-consumer task scheduling, and dynamic task prioritisation.</li>\n                  <li>Our framework effectively addresses challenges such as network congestion, data overload, and resource contention, ensuring efficient and reliable tool condition monitoring.</li>\n                  <li>Experimental results demonstrate that EBPC outperforms traditional architectures in terms of latency, throughput, and resource utilisation, making it a promising solution for real-time tool condition monitoring in manufacturing environments.</li>\n            </ul>\n          \n        </div>\n      </div>\n    </section>\n\n\n\n    <section className=\"bg-orange-100 dark:bg-blue-900\">\n      <div className=\"w-full mx-auto max-w-(--breakpoint-xl) px-6 py-8 lg:flex align-middle\">\n        <div className=\"flex-1 justify-center align-middle\">\n          <p className=\"text-4xl p-8 font-normal text-orange-900 dark:text-blue-200 max-w-none\">\n            Jiduo would like to acknowledge the continuing contribution to this research by&nbsp;\n            <Link to=\"https://www.csc.edu.cn/\" className=\"hover:text-orange-700\n            transition-all duration-150 ease-in-out hover:underline font-bold\n            dark:hover:text-blue-200\">China scholarship council</Link>.\n          </p>\n        </div>\n\n        <div className=\"lg:shrink-0\" >\n          <div className=\"p-6 flex-1 justify-item-center\">\n            <img className=\"max-w-full flex justify-center \n            h-48 md:h-36\n            border-r-8 rounded-2xl dark:shadow-xl dark:bg-slate-200\" src={CSCLogo} alt=\"Logo of China scholarship council\" />\n          </div>\n\n        </div>\n\n\n      </div>\n\n    </section>\n\n    \n\n\n\n    <section className=\"bg-gray-100 dark:bg-gray-700\">\n      <div className=\"w-full mx-auto max-w-(--breakpoint-xl) px-6 py-8\">\n        <p className=\"text-2xl mt-2 font-normal text-gray-500 dark:text-gray-200 max-w-none\">\n          If you have any questions or suggestions, please feel free to&nbsp;\n          <Link to=\"/contact\" className=\"text-blue-500 dark:text-blue-200 hover:text-blue-700\n           transition-all duration-150 ease-in-out underline\n           dark:hover:text-blue-200\">contact us</Link>.\n        </p>\n      </div>\n\n\n    \n    </section>\n\n  </Layout>\n  )\n}\n\n\n/**\n * Head export to define metadata for the page\n *\n * See: https://www.gatsbyjs.com/docs/reference/built-in-components/gatsby-head/\n */\nexport const Head = () => <Seo title=\"In-process unified prediction for process incidence and tool wear based on a deep learning approach\" />\n\nexport default TppPage\n\nexport const query = graphql`\n  query HybridPredictionPageQuery($language: String!) {\n    locales: allLocale(filter: {language: {eq: $language}}) {\n      edges {\n        node {\n          ns\n          data\n          language\n        }\n      }\n    }\n  }\n`","/**\n * SEO component that queries for data with\n * Gatsby's useStaticQuery React hook\n *\n * See: https://www.gatsbyjs.com/docs/how-to/querying-data/use-static-query/\n */\n\nimport * as React from \"react\"\nimport { useStaticQuery, graphql } from \"gatsby\"\n\nfunction Seo({ description, title, children }) {\n  const { site } = useStaticQuery(\n    graphql`\n      query {\n        site {\n          siteMetadata {\n            title\n            description\n            author\n          }\n        }\n      }\n    `\n  )\n\n  const metaDescription = description || site.siteMetadata.description\n  const defaultTitle = site.siteMetadata?.title\n\n  return (\n    <>\n      <title>{defaultTitle ? `${title} | ${defaultTitle}` : title}</title>\n      <meta name=\"description\" content={metaDescription} />\n      <meta property=\"og:title\" content={title} />\n      <meta property=\"og:description\" content={metaDescription} />\n      <meta property=\"og:type\" content=\"website\" />\n      <meta name=\"twitter:card\" content=\"summary\" />\n      <meta name=\"twitter:creator\" content={site.siteMetadata?.author || ``} />\n      <meta name=\"twitter:title\" content={title} />\n      <meta name=\"twitter:description\" content={metaDescription} />\n      {children}\n    </>\n  )\n}\n\nexport default Seo\n","export default __webpack_public_path__ + \"static/china-scholarship-logo-d38fb5e78cf70dc3f74a5e87332ec579.jpg\";","\"use strict\";\n\nexports.__esModule = true;\nvar _reactI18next = require(\"react-i18next\");\nObject.keys(_reactI18next).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (key in exports && exports[key] === _reactI18next[key]) return;\n  exports[key] = _reactI18next[key];\n});\nvar _i18nextContext = require(\"./i18nextContext\");\nObject.keys(_i18nextContext).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (key in exports && exports[key] === _i18nextContext[key]) return;\n  exports[key] = _i18nextContext[key];\n});\nvar _useI18next = require(\"./useI18next\");\nObject.keys(_useI18next).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (key in exports && exports[key] === _useI18next[key]) return;\n  exports[key] = _useI18next[key];\n});\nvar _Link = require(\"./Link\");\nObject.keys(_Link).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (key in exports && exports[key] === _Link[key]) return;\n  exports[key] = _Link[key];\n});"],"names":["_interopRequireDefault","require","exports","__esModule","useI18next","_extends2","_reactI18next","_react","_gatsby","_i18nextContext","_types","ns","options","_useTranslation","useTranslation","i18n","t","ready","context","useContext","I18nextContext","routed","defaultLanguage","generateDefaultLanguagePage","getLanguagePath","language","default","navigate","to","languagePath","link","changeLanguage","pathname","i","indexOf","substring","removeLocalePart","window","location","search","localStorage","setItem","LANGUAGE_KEY","Link","_objectWithoutPropertiesLoose2","obj","nodeInterop","cache","_getRequireWildcardCache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_interopRequireWildcard","_excluded","WeakMap","cacheBabelInterop","cacheNodeInterop","forwardRef","_ref","ref","_onClick","onClick","rest","urlLanguage","createElement","innerRef","hrefLang","e","LangSwitch","languages","originalPath","currentLanguage","current","React","className","map","lng","label","toUpperCase","async","url","URL","href","parts","split","filter","Boolean","length","includes","shift","newPath","concat","_toConsumableArray","join","hash","history","pushState","title","siteTitle","loc","useLocation","isActive","normalized","startsWith","replace","prefRoot","prefixed","theme","setTheme","useState","stored","getItem","matchMedia","matches","useEffect","document","documentElement","classList","add","remove","type","id","toggleTheme","fill","viewBox","xmlns","d","fillRule","clipRule","Footer","Date","getFullYear","class","_data$site$siteMetada","children","data","useStaticQuery","dangerouslySetInnerHTML","__html","Header","site","siteMetadata","module","r","n","ExponentialBackoffDemo","attempts","setAttempts","running","setRunning","currentDelay","setCurrentDelay","successPct","setSuccessPct","networkRTT","setNetworkRTT","timerRef","baseDelay","clearTimeout","indicatorTimerRef","jitterFor","raw","Math","floor","random","senderTimerRef","seqRef","responseTimersRef","Map","nextSendRemaining","setNextSendRemaining","countdownRef","changeIndicator","setChangeIndicator","logs","setLogs","runningRef","currentDelayRef","isDark","setIsDark","m","v","addEventListener","addListener","removeEventListener","removeListener","pushLog","msg","time","toLocaleTimeString","prev","slice","sendOne","sendTime","delayAtSend","next","attempt","status","observedRTT","max","timer","setTimeout","success","it","prevDelay","min","clearInterval","scheduleNextSend","delete","interval","start","now","nextInterval","setInterval","elapsed","remaining","observed","ceil","cancel","values","clear","delay","initialDelay","disabled","reset","value","onChange","Number","target","style","accentColor","readOnly","Sparkline","width","height","l","a","_a$delayAtSend","bad","delays","rtts","maxVal","apply","w","h","step","pointsFor","arr","round","delayPoints","rttPoints","preserveAspectRatio","stroke","strokeWidth","points","BitDepthDemo","bitDepth","setBitDepth","noiseLevel","setNoiseLevel","phaseRef","rafRef","N","quantize","bits","levels","pow","scaled","toPoints","clean","setClean","Array","setObserved","quantized","setQuantized","snr","setSnr","sqnr","setSqnr","snrHistory","setSnrHistory","sqnrHistory","setSqnrHistory","last","performance","loop","dt","c","o","makeSignals","phase","noise","PI","s","sin","q","qClean","sp","np","qnp","qe","val","Infinity","log10","valq","snrVal","isFinite","sqnrVal","requestAnimationFrame","cancelAnimationFrame","origPoints","qPoints","estimatedBits","reduction","toFixed","strokeOrig","strokeQuant","SparklineMini","color","pts","reverse","range","len","strokeLinecap","strokeLinejoin","ProducerConsumerDemo","_ref2","initialConcurrency","initialProduceInterval","initialProcessTime","initialBufferSize","initialMode","__exposeHandlersRef","globalStartId","globalStopId","externalProduceController","produceInterval","setProduceInterval","processTime","setProcessTime","concurrency","setConcurrency","bufferSize","setBufferSize","mode","setMode","workersRef","producersRef","queueRef","blockingRef","produceIntervalRef","processTimeRef","queue","setQueue","processed","setProcessed","dropped","setDropped","avgLatency","setAvgLatency","latenciesRef","queueHistoryRef","queueHistory","setQueueHistory","recentProcessed","setRecentProcessed","pushQueueHistory","push","produceBlockingLoop","produceOne","scheduleConsumers","stop","item","producedAt","handleExternalTick","Promise","resolve","latency","avg","reduce","b","p","x","processItem","subscribe","unsubscribe","position","idx","transform","transition","display","opacity","animation","props","handlersRef","assign","epsilon","pi","halfPi","quarterPi","tau","abs","atan","atan2","cos","exp","log","hypot","sign","sqrt","tan","asin","compose","y","invert","rotationIdentity","lambda","phi","deltaLambda","deltaPhi","deltaGamma","rotationLambda","rotationPhiGamma","forwardRotationLambda","rotation","cosDeltaPhi","sinDeltaPhi","cosDeltaGamma","sinDeltaGamma","cosPhi","z","k","noop","line","lines","point","lineStart","lineEnd","rejoin","pop","result","Intersection","other","entry","this","segments","compareIntersection","startInside","interpolate","stream","subject","clip","forEach","segment","p0","p1","pointEqual","sort","isSubject","array","Adder","constructor","_partials","Float64Array","_n","j","hi","lo","valueOf","spherical","cartesian","cartesianDot","cartesianCross","cartesianAddInPlace","cartesianScale","vector","cartesianNormalizeInPlace","longitude","merge","arrays","from","flatten","pointVisible","clipLine","sink","polygon","ring","ringBuffer","ringSink","polygonStarted","polygonStart","pointRing","ringStart","ringEnd","polygonEnd","sinPhi","normal","angle","winding","sum","point0","lambda0","phi0","sinPhi0","cosPhi0","lambda1","sinPhi1","cosPhi1","point1","phi1","delta","absDelta","antimeridian","arc","intersection","phiArc","polygonContains","sphere","pointLine","ringSegments","validSegment","NaN","sign0","sign1","sinLambda0Lambda1","clipAntimeridianIntersect","direction","circleStream","radius","t0","t1","cosRadius","sinRadius","circleRadius","acos","clipMax","clipMin","clipRectangle","x0","y0","x1","y1","visible","a1","corner","comparePoint","ca","cb","x__","y__","v__","x_","y_","v_","first","activeStream","bufferStream","clipStream","linePoint","a0","b0","b1","polygonInside","cleanInside","ax","ay","dx","dy","transformer","methods","TransformStream","streamGeometry","geometry","streamGeometryType","streamObjectType","Feature","object","FeatureCollection","features","Sphere","Point","coordinates","MultiPoint","LineString","streamLine","MultiLineString","Polygon","streamPolygon","MultiPolygon","GeometryCollection","geometries","closed","coordinate","boundsStream","bounds","fit","projection","fitBounds","clipExtent","scale","translate","fitExtent","extent","cosMinDistance","project","delta2","resampleLineTo","c0","c1","depth","d2","phi2","lambda2","x2","y2","dx2","dy2","dz","lambda00","x00","y00","a00","b00","c00","resampleStream","ringPoint","resampleNone","transformRadians","scaleTranslateRotate","sx","sy","alpha","scaleTranslate","cosAlpha","sinAlpha","ai","bi","ci","fi","projectAt","rotate","projectResample","projectTransform","projectRotateTransform","cacheStream","theta","preclip","postclip","identity","recenter","center","resample","transformRotate","_","arguments","undefined","clipAngle","cr","smallRadius","notHemisphere","intersect","two","n1","n2","n2n2","n1n2","determinant","c2","n1xn2","A","u","uu","t2","polar","q1","code","v0","v00","point2","reflectX","reflectY","precision","fitSize","size","fitWidth","fitHeight","projectionMutator","mercatorRaw","reclip","forward","mercatorProjection","areaSum","areaRingSum","areaStream","areaRingStart","areaRingEnd","area","areaPointFirst","areaPoint","X0","Y0","Z0","X1","Y1","Z1","X2","Y2","Z2","centroidStream","centroidPoint","centroidLineStart","centroidLineEnd","centroidRingStart","centroidRingEnd","centroid","centroidPointFirstLine","centroidPointLine","centroidPointFirstRing","centroidPointRing","PathContext","_context","_radius","pointRadius","_line","_point","closePath","moveTo","lineTo","lengthRing","lengthSum","lengthStream","lengthPointFirst","lengthPoint","cacheDigits","cacheAppend","cacheRadius","cacheCircle","PathString","digits","_append","append","RangeError","strings","appendRound","topology","objects","bbox","properties","transformPoint","kx","ky","input","output","arcs","ConnectivityMap","pointScale","landGeo","setLandGeo","topoKey","setTopoKey","loadError","setLoadError","imageHref","setImageHref","clipIdRef","toString","maxTotal","total","cancelled","fetch","then","ok","Error","json","topo","console","keys","preferred","chosenKey","find","landObj","geo","feature","k2","message","String","catch","geoMercator","pathGenerator","projectionStream","contextStream","path","measure","geoPath","cvs","ctx","getContext","lon","lat","__connectivity_heatmap_ready","__connectivity_heatmap_href","__connectivity_heatmap_length","lerp","lerpColor","blue","yellow","red","colorFor","py","px","lonlat","clearRect","num","den","dist2","power","rgb","fillStyle","fillRect","toDataURL","role","xlinkHref","clipPath","pointerEvents","strokeOpacity","coords","city","cx","cy","country","Head","Seo","TppPage","pcRefA","pcRefB","setGlobalStartId","setGlobalStopId","sharedControllerRef","subs","Set","rafId","runningController","tick","fn","ms","connectivityData","Layout","startAll","stopAll","src","CSCLogo","alt","_site$siteMetadata","_site$siteMetadata2","description","metaDescription","defaultTitle","name","content","property","author","_useI18next","_Link"],"sourceRoot":""}